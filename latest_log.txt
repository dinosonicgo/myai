### AI Lover Log - Last updated at 2025-09-30T19:43:19.234933 ###

    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.61
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '莉莉...ized_name': '莉莉絲'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.62
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '米婭...ardized_name': '米婭'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.64
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '瑪莉...ardized_name': '瑪莉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.65
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '愛莉...ized_name': '愛莉莎'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.66
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '安娜...ardized_name': '安娜'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.67
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '澤拉...ardized_name': '澤拉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.74
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '米婭...ardized_name': '米婭'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.75
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '卡蓮...ardized_name': '卡蓮'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.76
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '艾拉...ardized_name': '艾拉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.77
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '凱爾...ardized_name': '凱爾'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.78
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '里斯...ardized_name': '里斯'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.79
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '瑪倫...ardized_name': '瑪倫'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.86
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '卡萊...ized_name': '卡萊兒'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.87
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '莉莉...ized_name': '莉莉絲'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.88
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '老高...ardized_name': '高爾'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.89
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '亞瑟...ardized_name': '亞瑟'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.90
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '馬丁...ardized_name': '馬丁'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.91
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '亞瑟...ardized_name': '亞瑟'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.92
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '馬丁...ardized_name': '馬丁'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.93
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '克拉...ized_name': '克拉拉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.94
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '高爾...ardized_name': '高爾'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.95
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '翠絲...ardized_name': '翠絲'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.96
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '迪茜...ardized_name': '迪茜'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.97
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '阿利...d_name': '阿利斯特'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.99
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '費奇...ardized_name': '費奇'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.100
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '老羅...ardized_name': '老羅'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.101
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '馬克...ardized_name': '馬克'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.103
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '薩格...'菲利普•薩格納'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.104
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '艾莉...ized_name': '艾莉諾'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.105
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '菲利...'菲利普•薩格納'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.106
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '布里...d_name': '布里奇特'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.107
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '瓦萊...ized_name': '瓦萊麗'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.108
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '國王...ame': '埃德蒙三世'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.109
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '阿拉...d_name': '阿拉里克'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.110
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '阿拉...d_name': '阿拉里克'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.111
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '赫克...ized_name': '赫克托'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.113
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '伊索...d_name': '伊索爾德'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.114
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '博林...ardized_name': '博林'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.116
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '瓦勒...d_name': '瓦勒留斯'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.117
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '麥可...ardized_name': '麥可'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.118
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '克拉...ized_name': '克拉拉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.123
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '莉娜...ardized_name': '莉娜'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.124
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '索菲...ized_name': '索菲亞'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.125
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '卡蓮...ardized_name': '卡蓮'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.126
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '莉娜...ardized_name': '莉娜'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.127
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '貝拉...ardized_name': '貝拉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.128
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '絲月...ardized_name': '絲月'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
resolutions.129
  Value error, 如果 decision 是 'MERGE' 或 'EXISTING'，則 matched_key 欄位是必需的。 [type=value_error, input_value={'original_name': '諾拉...ardized_name': '諾拉'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/value_error
2025-09-30 19:15:21 - [WARNING] - [512280345618546699] [實體解析] 未能生成有效的解析計畫，所有NPC將被視為新實體處理。
2025-09-30 19:15:39 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'location_info' 類別處理 27 個實體...
2025-09-30 19:15:42 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'item_info' 類別處理 13 個實體...
2025-09-30 19:15:43 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'creature_info' 類別處理 1 個實體...
2025-09-30 19:15:43 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'quest' 類別處理 8 個實體...
2025-09-30 19:15:44 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 52 個實體...
2025-09-30 19:15:51 - [INFO] - [512280345618546699] [創世 LORE 解析] LORE 已成功解析並存入 SQL 資料庫。
2025-09-30 19:15:51 - [INFO] - [512280345618546699] [後台創世 1/5] LORE 智能解析已同步完成，數據已存入 SQL。
2025-09-30 19:15:51 - [INFO] - [512280345618546699] [後台創世 2/5] 正在補完角色檔案...
2025-09-30 19:15:54 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #4.
2025-09-30 19:15:54 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #5.
2025-09-30 19:15:54 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['user_profile', 'ai_profile']
2025-09-30 19:15:54 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-30 19:15:54 - [INFO] - [512280345618546699] [後台創世 3/5] 所有 SQL 數據準備就緒，正在觸發 RAG 索引全量創始構建...
2025-09-30 19:15:54 - [INFO] - [512280345618546699] (Retriever Builder) 強制重建觸發，正在從資料庫執行全量創始構建...
2025-09-30 19:15:54 - [INFO] - [512280345618546699] (Retriever Builder) 執行強制清理，正在刪除舊的向量儲存目錄...
2025-09-30 19:15:54 - [INFO] - [512280345618546699] (Retriever Builder) 已確保向量儲存目錄為全新狀態。
2025-09-30 19:15:54 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 205 條文檔用於創始構建。
2025-09-30 19:17:18 - [INFO] - [512280345618546699] (Retriever Builder) ✅ 混合檢索器創始構建成功，並已將索引持久化到磁碟。
2025-09-30 19:17:18 - [INFO] - [512280345618546699] [後台創世 3/5] RAG 索引全量創始構建完成。
2025-09-30 19:17:18 - [INFO] - [512280345618546699] [後台創世 4/5] 正在生成世界創世資訊...
2025-09-30 19:17:18 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #0) 遭遇內容審查或安全錯誤: BlockedPromptException。
2025-09-30 19:17:18 - [WARNING] - [512280345618546699] 最終生成鏈遭遇審查。啟動【最高指令集注入重試】策略...
2025-09-30 19:17:18 - [INFO] - [512280345618546699] 已對 Prompt 附加完整的核心指令集，正在進行強化重試...
2025-09-30 19:17:48 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #1.
2025-09-30 19:17:48 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['game_state']
2025-09-30 19:17:48 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-30 19:17:49 - [INFO] - [512280345618546699] [/start] 初始地點 '埃德蒙王國 > 王都城鎮區 > 咆哮壁爐酒館' 已成功生成並存入LORE。
2025-09-30 19:17:49 - [INFO] - [512280345618546699] [後台創世 5/5] 正在生成開場白...
2025-09-30 19:18:19 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #2.
2025-09-30 19:18:19 - [INFO] - [512280345618546699] [後台創世 5/5] 開場白生成完毕。
2025-09-30 19:18:20 - [INFO] - [512280345618546699] [後台創世] 正在向使用者私訊發送最終開場白...
2025-09-30 19:18:20 - [INFO] - [512280345618546699] [後台創世] 開場白發送完畢。
2025-09-30 19:18:20 - [INFO] - [512280345618546699] 後台創世流程結束，狀態鎖已釋放。
2025-09-30 19:19:52 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-30 19:19:52 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-30 19:19:53 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-30 19:19:53 - [INFO] - Discord Bot is ready!
2025-09-30 19:19:55 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-30 19:19:55 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-30 19:19:56 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-30 19:25:29 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-30 19:25:29 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-30 19:25:30 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-30 19:25:30 - [INFO] - Discord Bot is ready!
2025-09-30 19:25:33 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-30 19:25:33 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-30 19:25:33 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-30 19:29:06 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-30 19:29:06 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-30 19:29:06 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-30 19:29:06 - [INFO] - Discord Bot is ready!
2025-09-30 19:29:09 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-30 19:29:09 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-30 19:29:10 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-30 19:29:14 - [INFO] - [512280345618546699] 後台重置任務開始...
2025-09-30 19:29:14 - [INFO] - [512280345618546699] 未檢測到活躍的 AI 實例，直接進行清理。
2025-09-30 19:29:14 - [INFO] - [512280345618546699] 正在清除所有資料庫記錄...
2025-09-30 19:29:14 - [INFO] - [512280345618546699] 所有資料庫記錄已成功清除。
2025-09-30 19:29:14 - [INFO] - [512280345618546699] (Robust Delete) 正在啟動對目錄 data\vector_stores\512280345618546699 的健壯刪除流程...
2025-09-30 19:29:14 - [INFO] - [512280345618546699] (Robust Delete) ✅ 在第 1 次嘗試中成功刪除目錄: data\vector_stores\512280345618546699
2025-09-30 19:29:16 - [INFO] - [512280345618546699] (UI Event) Persistent 'StartSetupView' button clicked.
2025-09-30 19:29:20 - [INFO] - [512280345618546699] (UI Event) WorldSettingsModal submitted. is_setup_flow: True
2025-09-30 19:29:21 - [INFO] - 使用者 512280345618546699 沒有活躍的 AI 實例，嘗試創建...
2025-09-30 19:29:21 - [INFO] - [512280345618546699] 處於設定流程中，即使資料庫無記錄，也創建一個臨時的記憶體實例。
2025-09-30 19:29:21 - [INFO] - [512280345618546699] 核心數據模板 'world_snapshot_template.txt' 已成功加載。
2025-09-30 19:29:21 - [INFO] - [512280345618546699] 核心協議 '00_supreme_directive.txt' 已成功加載。
2025-09-30 19:29:21 - [INFO] - [512280345618546699] 正在創建本地 Embedding 模型 'infgrad/stella-base-zh-v2' 實例...
2025-09-30 19:29:53 - [INFO] - [512280345618546699] ✅ 本地 Embedding 模型實例創建成功。
2025-09-30 19:29:53 - [INFO] - [512280345618546699] 所有輕量級前置資源已準備就緒 (RAG 創建已延遲)。
2025-09-30 19:29:53 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['world_settings']
2025-09-30 19:29:53 - [WARNING] - [512280345618546699] 在持久化更新時找不到使用者資料，將創建新記錄。
2025-09-30 19:29:53 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-30 19:29:56 - [INFO] - [512280345618546699] (UI Event) Persistent 'ContinueToUserSetupView' button clicked.
2025-09-30 19:30:04 - [INFO] - [512280345618546699] (UI Event) CharacterSettingsModal submitted for profile_type: 'user', is_setup_flow: True
2025-09-30 19:30:05 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['user_profile']
2025-09-30 19:30:05 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-30 19:30:33 - [INFO] - [512280345618546699] (UI Event) Persistent 'ContinueToAiSetupView' button clicked.
2025-09-30 19:30:44 - [INFO] - [512280345618546699] (UI Event) CharacterSettingsModal submitted for profile_type: 'ai', is_setup_flow: True
2025-09-30 19:30:44 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['ai_profile']
2025-09-30 19:30:45 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-30 19:30:46 - [INFO] - [512280345618546699] [創世流程] 檔案上傳開始，已設定 active_setups 狀態鎖。
2025-09-30 19:30:52 - [INFO] - [512280345618546699] (on_message) 偵測到用戶處於活躍的創世流程中，已忽略常規訊息 '...' 以防止競爭。
2025-09-30 19:30:54 - [INFO] - [512280345618546699] 獨立的後台創世流程已為用戶啟動。
2025-09-30 19:30:54 - [INFO] - [512280345618546699] [後台創世 1/5] 正在進行 LORE 智能解析...
2025-09-30 19:30:54 - [INFO] - [512280345618546699] [創世 LORE 解析] 正在啟動多層降級解析管線...
2025-09-30 19:30:54 - [INFO] - [512280345618546699] [LORE 解析] 已將世界聖經原文分割成 8 個文本塊進行處理。
2025-09-30 19:30:54 - [INFO] - [512280345618546699] [LORE 解析] 正在處理文本塊 1/8...
2025-09-30 19:30:54 - [INFO] - [512280345618546699] [LORE 解析 1-1/5] 正在嘗試【理想方案：雲端宏觀解析】...
2025-09-30 19:31:12 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-09-30 19:31:12 - [INFO] - [512280345618546699] [LORE 解析 1-1/5] ✅ 成功！
2025-09-30 19:31:12 - [INFO] - [512280345618546699] [LORE 解析] 正在處理文本塊 2/8...
2025-09-30 19:31:12 - [INFO] - [512280345618546699] [LORE 解析 2-1/5] 正在嘗試【理想方案：雲端宏觀解析】...
2025-09-30 19:31:30 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #1.
2025-09-30 19:31:30 - [INFO] - [512280345618546699] [LORE 解析 2-1/5] ✅ 成功！
2025-09-30 19:31:30 - [INFO] - [512280345618546699] [LORE 解析] 正在處理文本塊 3/8...
2025-09-30 19:31:30 - [INFO] - [512280345618546699] [LORE 解析 3-1/5] 正在嘗試【理想方案：雲端宏觀解析】...
2025-09-30 19:31:43 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #2.
2025-09-30 19:31:43 - [INFO] - [512280345618546699] [LORE 解析 3-1/5] ✅ 成功！
2025-09-30 19:31:43 - [INFO] - [512280345618546699] [LORE 解析] 正在處理文本塊 4/8...
2025-09-30 19:31:43 - [INFO] - [512280345618546699] [LORE 解析 4-1/5] 正在嘗試【理想方案：雲端宏觀解析】...
2025-09-30 19:32:04 - [ERROR] - [512280345618546699] 在 ainvoke 期間發生未知錯誤 (模型: gemini-2.5-flash-lite): 'int' object has no attribute 'name'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 887, in ainvoke_with_rotation
    if response.candidates and response.candidates[0].finish_reason.name not in ['STOP', 'FINISH_REASON_UNSPECIFIED']:
AttributeError: 'int' object has no attribute 'name'
2025-09-30 19:32:04 - [ERROR] - [512280345618546699] [LORE 解析 4-1/5] 遭遇未知錯誤: 'int' object has no attribute 'name'，正在降級。
2025-09-30 19:32:04 - [INFO] - [512280345618546699] [LORE 解析 4-2/5] 正在嘗試【本地備援方案：無審查解析】...
2025-09-30 19:32:04 - [INFO] - [512280345618546699] 正在使用本地模型 'HammerAI/llama-3-lexi-uncensored:latest' 進行LORE解析 (Attempt 1/2)...
2025-09-30 19:35:06 - [INFO] - [512280345618546699] 本地模型在首次嘗試中成功解析並驗證了LORE數據。
2025-09-30 19:35:06 - [WARNING] - [512280345618546699] [LORE 解析 4-2/5] 本地模型未能成功解析，正在降級...
2025-09-30 19:35:06 - [INFO] - [512280345618546699] [LORE 解析 4-3/5] 層級3邏輯已合併至層級1，跳過。
2025-09-30 19:35:06 - [INFO] - [512280345618546699] [LORE 解析 4-4/5] 正在嘗試【混合 NLP 方案：靶向精煉】...
2025-09-30 19:35:09 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #4) 遭遇內容審查或安全錯誤: BlockedPromptException。
2025-09-30 19:35:09 - [WARNING] - [512280345618546699] 內部鏈意外遭遇審查。啟動【通用化解構-重構】策略...
2025-09-30 19:35:09 - [ERROR] - [512280345618546699] (Euphemizer) 在失敗的 Prompt 中找不到任何可供消毒的已知內容標記，無法執行委婉化。
2025-09-30 19:35:09 - [INFO] - [512280345618546699] [LORE 解析 4-5/5] 正在嘗試【法醫級重構方案】...
2025-09-30 19:35:12 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #5.
2025-09-30 19:35:12 - [INFO] - [512280345618546699] [LORE 解析 4-5/5] ✅ 成功！
2025-09-30 19:35:12 - [INFO] - [512280345618546699] [LORE 解析] 正在處理文本塊 5/8...
2025-09-30 19:35:12 - [INFO] - [512280345618546699] [LORE 解析 5-1/5] 正在嘗試【理想方案：雲端宏觀解析】...
2025-09-30 19:35:26 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-09-30 19:35:26 - [INFO] - [512280345618546699] [LORE 解析 5-1/5] ✅ 成功！
2025-09-30 19:35:26 - [INFO] - [512280345618546699] [LORE 解析] 正在處理文本塊 6/8...
2025-09-30 19:35:26 - [INFO] - [512280345618546699] [LORE 解析 6-1/5] 正在嘗試【理想方案：雲端宏觀解析】...
2025-09-30 19:35:43 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #1.
2025-09-30 19:35:43 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #1) 遭遇解析或驗證錯誤: JSONDecodeError。
2025-09-30 19:35:43 - [ERROR] - [512280345618546699] [LORE 解析 6-1/5] 遭遇未知錯誤: Expecting property name enclosed in double quotes: line 849 column 7 (char 17315)，正在降級。
2025-09-30 19:35:43 - [INFO] - [512280345618546699] [LORE 解析 6-2/5] 正在嘗試【本地備援方案：無審查解析】...
2025-09-30 19:35:43 - [INFO] - [512280345618546699] 正在使用本地模型 'HammerAI/llama-3-lexi-uncensored:latest' 進行LORE解析 (Attempt 1/2)...
2025-09-30 19:37:57 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-30 19:37:57 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-30 19:37:57 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-30 19:37:57 - [INFO] - Discord Bot is ready!
2025-09-30 19:38:00 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-30 19:38:00 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-30 19:38:01 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-30 19:38:05 - [INFO] - [512280345618546699] 後台重置任務開始...
2025-09-30 19:38:05 - [INFO] - [512280345618546699] 未檢測到活躍的 AI 實例，直接進行清理。
2025-09-30 19:38:05 - [INFO] - [512280345618546699] 正在清除所有資料庫記錄...
2025-09-30 19:38:06 - [INFO] - [512280345618546699] 所有資料庫記錄已成功清除。
2025-09-30 19:38:06 - [INFO] - [512280345618546699] (Robust Delete) 正在啟動對目錄 data\vector_stores\512280345618546699 的健壯刪除流程...
2025-09-30 19:38:06 - [INFO] - [512280345618546699] (Robust Delete) ✅ 在第 1 次嘗試中成功刪除目錄: data\vector_stores\512280345618546699
2025-09-30 19:38:07 - [INFO] - [512280345618546699] (UI Event) Persistent 'StartSetupView' button clicked.
2025-09-30 19:38:12 - [INFO] - [512280345618546699] (UI Event) WorldSettingsModal submitted. is_setup_flow: True
2025-09-30 19:38:12 - [INFO] - 使用者 512280345618546699 沒有活躍的 AI 實例，嘗試創建...
2025-09-30 19:38:12 - [INFO] - [512280345618546699] 處於設定流程中，即使資料庫無記錄，也創建一個臨時的記憶體實例。
2025-09-30 19:38:12 - [INFO] - [512280345618546699] 核心數據模板 'world_snapshot_template.txt' 已成功加載。
2025-09-30 19:38:12 - [INFO] - [512280345618546699] 核心協議 '00_supreme_directive.txt' 已成功加載。
2025-09-30 19:38:12 - [INFO] - [512280345618546699] 正在創建本地 Embedding 模型 'infgrad/stella-base-zh-v2' 實例...
2025-09-30 19:38:19 - [INFO] - [512280345618546699] ✅ 本地 Embedding 模型實例創建成功。
2025-09-30 19:38:19 - [INFO] - [512280345618546699] 所有輕量級前置資源已準備就緒 (RAG 創建已延遲)。
2025-09-30 19:38:19 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['world_settings']
2025-09-30 19:38:19 - [WARNING] - [512280345618546699] 在持久化更新時找不到使用者資料，將創建新記錄。
2025-09-30 19:38:19 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
