### AI Lover Log - Last updated at 2025-10-08T06:02:34.603661 ###

  Invalid JSON: EOF while parsing an object at line 8 column 23 [type=json_invalid, input_value='{\n    "name": "露比",...    "relationships": {}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 3 個 LORE 物件時失敗: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={'疾病': '嚴重的氣喘'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 4 個 LORE 物件時失敗: 1 validation error for CharacterProfile
  Invalid JSON: EOF while parsing an object at line 8 column 23 [type=json_invalid, input_value='{\n    "name": "老漢...    "relationships": {}', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 5 個 LORE 物件時失敗: 1 validation error for CharacterProfile
  Invalid JSON: EOF while parsing an object at line 11 column 5 [type=json_invalid, input_value='{\n    "name": "麥可",...僚（對比）"\n    }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 6 個 LORE 物件時失敗: 1 validation error for CharacterProfile
  Invalid JSON: EOF while parsing an object at line 12 column 5 [type=json_invalid, input_value='{\n    "name": "蓋博...: "被騷擾者"\n    }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 7 個 LORE 物件時失敗: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={'性格': '潑辣'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 8 個 LORE 物件時失敗: 1 validation error for CharacterProfile
  Invalid JSON: EOF while parsing an object at line 14 column 5 [type=json_invalid, input_value='{\n    "name": "菲利...托": "對手"\n    }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 9 個 LORE 物件時失敗: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={'體質': '英俊挺拔...康復並超越巔峰'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 10 個 LORE 物件時失敗: 1 validation error for CharacterProfile
  Invalid JSON: EOF while parsing an object at line 11 column 5 [type=json_invalid, input_value='{\n    "name": "三皇...納": "對手"\n    }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 11 個 LORE 物件時失敗: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={'外貌': '英俊挺拔'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 12 個 LORE 物件時失敗: 1 validation error for CharacterProfile
  Invalid JSON: EOF while parsing an object at line 17 column 5 [type=json_invalid, input_value='{\n    "name": "薩格... "上司/盟友"\n    }', input_type=str]
    For further information visit https://errors.pydantic.dev/2.8/v/json_invalid。已跳過此條記錄。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 驗證第 13 個 LORE 物件時失敗: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={'身形': '魁梧', '氣...久經戰火的堡壘'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing。已跳過此條記錄。
2025-10-08 01:20:45 - [ERROR] - [512280345618546699] [LORE精煉-兩階段] 批次 #6/8: 處理時發生不可恢復的嚴重錯誤: 成功提取 JSON 列表，但其中沒有任何一個物件可以被成功驗證為 CharacterProfile。。此批次將不會被精煉。
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 4048, in _process_batch
    raise ValueError("成功提取 JSON 列表，但其中沒有任何一個物件可以被成功驗證為 CharacterProfile。")
ValueError: 成功提取 JSON 列表，但其中沒有任何一個物件可以被成功驗證為 CharacterProfile。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [LORE精煉-兩階段] 批次 #8/8: 開始處理...
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [Raw RAG] 正在為內部流程執行原始文檔檢索，查詢: '關於角色 '貝拉' 的所有已知資訊、背景故事、身份和關係。'
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [Raw RAG] 正在為內部流程執行原始文檔檢索，查詢: '關於角色 '諾拉' 的所有已知資訊、背景故事、身份和關係。'
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [Raw RAG] ✅ 成功檢索到 20 份原始文檔。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [Raw RAG] ✅ 成功檢索到 20 份原始文檔。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [LORE精煉-兩階段] 批次 #8/8: 階段 1/2 - 正在執行 LLM 批次化結構預解析...
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #0 (針對模型 gemini-2.5-flash-lite，剩餘 48 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-flash-lite，剩餘 53 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #2 (針對模型 gemini-2.5-flash-lite，剩餘 57 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #3 (針對模型 gemini-2.5-flash-lite，剩餘 65 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-flash-lite，剩餘 55 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-flash-lite，剩餘 60 秒)。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [API 警告] 針對模型 'gemini-2.5-flash-lite'，所有 API 金鑰當前都處於冷卻期。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #0 (針對模型 gemini-2.5-flash-lite，剩餘 48 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-flash-lite，剩餘 53 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #2 (針對模型 gemini-2.5-flash-lite，剩餘 57 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #3 (針對模型 gemini-2.5-flash-lite，剩餘 65 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-flash-lite，剩餘 55 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-flash-lite，剩餘 60 秒)。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [API 警告] 針對模型 'gemini-2.5-flash-lite'，所有 API 金鑰當前都處於冷卻期。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #0 (針對模型 gemini-2.5-flash-lite，剩餘 48 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-flash-lite，剩餘 53 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #2 (針對模型 gemini-2.5-flash-lite，剩餘 57 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #3 (針對模型 gemini-2.5-flash-lite，剩餘 65 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-flash-lite，剩餘 55 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-flash-lite，剩餘 60 秒)。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [API 警告] 針對模型 'gemini-2.5-flash-lite'，所有 API 金鑰當前都處於冷卻期。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #0 (針對模型 gemini-2.5-flash-lite，剩餘 48 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-flash-lite，剩餘 53 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #2 (針對模型 gemini-2.5-flash-lite，剩餘 57 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #3 (針對模型 gemini-2.5-flash-lite，剩餘 65 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-flash-lite，剩餘 55 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-flash-lite，剩餘 60 秒)。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [API 警告] 針對模型 'gemini-2.5-flash-lite'，所有 API 金鑰當前都處於冷卻期。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #0 (針對模型 gemini-2.5-flash-lite，剩餘 48 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-flash-lite，剩餘 53 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #2 (針對模型 gemini-2.5-flash-lite，剩餘 57 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #3 (針對模型 gemini-2.5-flash-lite，剩餘 65 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-flash-lite，剩餘 55 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-flash-lite，剩餘 60 秒)。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [API 警告] 針對模型 'gemini-2.5-flash-lite'，所有 API 金鑰當前都處於冷卻期。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #0 (針對模型 gemini-2.5-flash-lite，剩餘 48 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-flash-lite，剩餘 53 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #2 (針對模型 gemini-2.5-flash-lite，剩餘 57 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #3 (針對模型 gemini-2.5-flash-lite，剩餘 65 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-flash-lite，剩餘 55 秒)。
2025-10-08 01:20:45 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-flash-lite，剩餘 60 秒)。
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] [API 警告] 針對模型 'gemini-2.5-flash-lite'，所有 API 金鑰當前都處於冷卻期。
2025-10-08 01:20:45 - [ERROR] - [512280345618546699] [Final Failure] 所有模型和金鑰均最終失敗。最後的錯誤是: None
2025-10-08 01:20:45 - [ERROR] - [512280345618546699] [LORE精煉-兩階段] 批次 #8/8: 處理時發生不可恢復的嚴重錯誤: ainvoke_with_rotation failed without a specific exception.。此批次將不會被精煉。
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 4016, in _process_batch
    raw_llm_output_str = await self.ainvoke_with_rotation(full_prompt, output_schema=None, retry_strategy='force')
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1786, in ainvoke_with_rotation
    raise last_exception if last_exception else Exception("ainvoke_with_rotation failed without a specific exception.")
Exception: ainvoke_with_rotation failed without a specific exception.
2025-10-08 01:20:45 - [WARNING] - [512280345618546699] Key #4 遭遇臨時 API 錯誤。将在 1.18 秒後重試...
2025-10-08 01:20:47 - [ERROR] - [512280345618546699] Key #4 (模型: gemini-2.5-flash-lite) 在 3 次重試後仍然失敗。
2025-10-08 01:20:47 - [CRITICAL] - [512280345618546699] [動態冷卻] Flash 模型速率超限！API Key #4 已被置入短期冷卻 65 秒。
2025-10-08 01:20:47 - [WARNING] - [512280345618546699] Key #4 遭遇臨時 API 錯誤。将在 2.23 秒後重試...
2025-10-08 01:20:47 - [WARNING] - [512280345618546699] Key #5 遭遇臨時 API 錯誤。将在 1.46 秒後重試...
2025-10-08 01:20:49 - [WARNING] - [512280345618546699] Key #5 遭遇臨時 API 錯誤。将在 2.37 秒後重試...
2025-10-08 01:20:49 - [ERROR] - [512280345618546699] Key #4 (模型: gemini-2.5-flash-lite) 在 3 次重試後仍然失敗。
2025-10-08 01:20:49 - [CRITICAL] - [512280345618546699] [動態冷卻] Flash 模型速率超限！API Key #4 已被置入短期冷卻 65 秒。
2025-10-08 01:20:50 - [WARNING] - [512280345618546699] Key #5 遭遇臨時 API 錯誤。将在 1.43 秒後重試...
2025-10-08 01:20:51 - [WARNING] - [512280345618546699] Key #5 遭遇臨時 API 錯誤。将在 2.40 秒後重試...
2025-10-08 01:20:52 - [ERROR] - [512280345618546699] Key #5 (模型: gemini-2.5-flash-lite) 在 3 次重試後仍然失敗。
2025-10-08 01:20:52 - [CRITICAL] - [512280345618546699] [動態冷卻] Flash 模型速率超限！API Key #5 已被置入短期冷卻 65 秒。
2025-10-08 01:20:52 - [ERROR] - [512280345618546699] [Final Failure] 所有模型和金鑰均最終失敗。最後的錯誤是: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 6.993277363s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
2025-10-08 01:20:52 - [ERROR] - [512280345618546699] [LORE精煉-兩階段] 批次 #1/8: 處理時發生不可恢復的嚴重錯誤: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 6.993277363s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]。此批次將不會被精煉。
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 4016, in _process_batch
    raw_llm_output_str = await self.ainvoke_with_rotation(full_prompt, output_schema=None, retry_strategy='force')
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1786, in ainvoke_with_rotation
    raise last_exception if last_exception else Exception("ainvoke_with_rotation failed without a specific exception.")
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1669, in ainvoke_with_rotation
    response = await asyncio.wait_for(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\generativeai\generative_models.py", line 385, in generate_content_async
    response = await self._async_client.generate_content(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\async_client.py", line 406, in generate_content
    response = await rpc(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_unary_async.py", line 231, in retry_wrapped_func
    return await retry_target(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_unary_async.py", line 163, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_unary_async.py", line 158, in retry_target
    return await target()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\grpc_helpers_async.py", line 88, in __await__
    raise exceptions.from_grpc_error(rpc_error) from rpc_error
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 6.993277363s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 6
}
]
2025-10-08 01:20:54 - [ERROR] - [512280345618546699] Key #5 (模型: gemini-2.5-flash-lite) 在 3 次重試後仍然失敗。
2025-10-08 01:20:54 - [CRITICAL] - [512280345618546699] [動態冷卻] Flash 模型速率超限！API Key #5 已被置入短期冷卻 65 秒。
2025-10-08 01:20:54 - [ERROR] - [512280345618546699] [Final Failure] 所有模型和金鑰均最終失敗。最後的錯誤是: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 4.513490744s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 4
}
]
2025-10-08 01:20:54 - [ERROR] - [512280345618546699] [LORE精煉-兩階段] 批次 #7/8: 處理時發生不可恢復的嚴重錯誤: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 4.513490744s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 4
}
]。此批次將不會被精煉。
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 4016, in _process_batch
    raw_llm_output_str = await self.ainvoke_with_rotation(full_prompt, output_schema=None, retry_strategy='force')
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1786, in ainvoke_with_rotation
    raise last_exception if last_exception else Exception("ainvoke_with_rotation failed without a specific exception.")
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1669, in ainvoke_with_rotation
    response = await asyncio.wait_for(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\generativeai\generative_models.py", line 385, in generate_content_async
    response = await self._async_client.generate_content(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\async_client.py", line 406, in generate_content
    response = await rpc(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_unary_async.py", line 231, in retry_wrapped_func
    return await retry_target(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_unary_async.py", line 163, in retry_target
    next_sleep = _retry_error_helper(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_base.py", line 214, in _retry_error_helper
    raise final_exc from source_exc
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\retry\retry_unary_async.py", line 158, in retry_target
    return await target()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\google\api_core\grpc_helpers_async.py", line 88, in __await__
    raise exceptions.from_grpc_error(rpc_error) from rpc_error
google.api_core.exceptions.ResourceExhausted: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits.
* Quota exceeded for metric: generativelanguage.googleapis.com/generate_content_free_tier_input_token_count, limit: 250000
Please retry in 4.513490744s. [violations {
  quota_metric: "generativelanguage.googleapis.com/generate_content_free_tier_input_token_count"
  quota_id: "GenerateContentInputTokensPerModelPerMinute-FreeTier"
  quota_dimensions {
    key: "model"
    value: "gemini-2.5-flash-lite"
  }
  quota_dimensions {
    key: "location"
    value: "global"
  }
  quota_value: 250000
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
, retry_delay {
  seconds: 4
}
]
2025-10-08 01:20:54 - [WARNING] - [512280345618546699] [LORE精煉-兩階段] 所有批次處理完成後，未能得到任何有效的精煉檔案。
