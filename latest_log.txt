### AI Lover Log - Last updated at 2025-10-01T00:57:42.742293 ###

results.67.world_lore_info
  Field required [type=missing, input_value={'name': '翠絲', 'alias...['翠絲', '克拉拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.68.world_lore_info
  Field required [type=missing, input_value={'name': '迪茜', 'alias...['迪茜', '克拉拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.69.world_lore_info
  Field required [type=missing, input_value={'name': '朱利安', 'al...利安', '莉莉絲']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.70.world_lore_info
  Field required [type=missing, input_value={'name': '阿利斯特', ...斯特', '莉莉絲']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.71.world_lore_info
  Field required [type=missing, input_value={'name': '瑪莉', 'alias...': ['瑪莉', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.72.world_lore_info
  Field required [type=missing, input_value={'name': '愛莉莎', 'al...['愛莉莎', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.73.world_lore_info
  Field required [type=missing, input_value={'name': '安娜', 'alias...': ['安娜', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.74.world_lore_info
  Field required [type=missing, input_value={'name': '里斯', 'alias...': ['里斯', '瑪倫']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.75.world_lore_info
  Field required [type=missing, input_value={'name': '瑪倫', 'alias...': ['瑪倫', '里斯']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.76.world_lore_info
  Field required [type=missing, input_value={'name': '提姆', 'alias...姆', '蓋博太太']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 805, in process_batch_task
    result = await self.ainvoke_with_rotation(full_prompt, output_schema=pydantic_schema, retry_strategy='euphemize')
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1310, in ainvoke_with_rotation
    raise e
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1291, in ainvoke_with_rotation
    return output_schema.model_validate(json.loads(clean_json_str))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\main.py", line 568, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 76 validation errors for BatchWorldLoresResult
results.1.world_lore_info
  Field required [type=missing, input_value={'name': '性神恩澤裝...', '絲月', '諾拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.2.world_lore_info
  Field required [type=missing, input_value={'name': '肉棒強化', ... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.3.world_lore_info
  Field required [type=missing, input_value={'name': '精神解放', ... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.4.world_lore_info
  Field required [type=missing, input_value={'name': '身體強化與...普', '阿拉里克']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.5.world_lore_info
  Field required [type=missing, input_value={'name': '母畜的價值...奇特', '瓦萊麗']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.6.world_lore_info
  Field required [type=missing, input_value={'name': '母畜在宅邸... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.7.world_lore_info
  Field required [type=missing, input_value={'name': '性神教', 'al...', '米婭', '卡蓮']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.8.world_lore_info
  Field required [type=missing, input_value={'name': '聖女的誕生...['絲月', '莉莉絲']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.9.world_lore_info
  Field required [type=missing, input_value={'name': '聖露修道院...', '絲月', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.10.world_lore_info
  Field required [type=missing, input_value={'name': '秘密的盟約...王', '維利爾斯']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.11.world_lore_info
  Field required [type=missing, input_value={'name': '皇家的皈依...d_entities': ['國王']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.12.world_lore_info
  Field required [type=missing, input_value={'name': '全新的秩序...s': ['赫克托皇子']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.13.world_lore_info
  Field required [type=missing, input_value={'name': '聖軍的雛形...索爾德', '博林']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.14.world_lore_info
  Field required [type=missing, input_value={'name': '城鎮區與聖...安', '阿利斯特']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.15.world_lore_info
  Field required [type=missing, input_value={'name': '貧民窟線劇...', '湯姆', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.16.world_lore_info
  Field required [type=missing, input_value={'name': '第二個神蹟...', '凱爾', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.17.world_lore_info
  Field required [type=missing, input_value={'name': '信仰的發酵...', '凱爾', '艾拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.18.world_lore_info
  Field required [type=missing, input_value={'name': '禁忌的解放...', '凱爾', '艾拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.19.world_lore_info
  Field required [type=missing, input_value={'name': '風暴的來臨..., '維利爾斯勳爵']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.20.world_lore_info
  Field required [type=missing, input_value={'name': '性神信仰體...勳爵', '夏卡爾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.21.world_lore_info
  Field required [type=missing, input_value={'name': '學院與城鎮...博太太', '提姆']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.22.world_lore_info
  Field required [type=missing, input_value={'name': '貴族與皇室...將軍', '艾莉諾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.23.world_lore_info
  Field required [type=missing, input_value={'name': '關於「性神...ntities': ['夏卡爾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.24.world_lore_info
  Field required [type=missing, input_value={'name': '關於「性神...勳爵', '夏卡爾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.25.world_lore_info
  Field required [type=missing, input_value={'name': '關於「性神... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.26.world_lore_info
  Field required [type=missing, input_value={'name': '第一次交鋒...勒留斯', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.27.world_lore_info
  Field required [type=missing, input_value={'name': '第二次交鋒...婭', '瓦勒留斯']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.28.world_lore_info
  Field required [type=missing, input_value={'name': '「聖露修道... ['維利爾斯勳爵']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.29.world_lore_info
  Field required [type=missing, input_value={'name': '舊神', 'alias...ntities': ['夏卡爾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.30.world_lore_info
  Field required [type=missing, input_value={'name': '平民的視角...['索菲亞', '卡蓮']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.31.world_lore_info
  Field required [type=missing, input_value={'name': '維利爾斯家...•維利爾斯勳爵']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.32.world_lore_info
  Field required [type=missing, input_value={'name': '「維利爾斯...', '國王', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.33.world_lore_info
  Field required [type=missing, input_value={'name': '「聖女」莉..., '維利爾斯勳爵']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.34.world_lore_info
  Field required [type=missing, input_value={'name': '「獵手 / 聖...', '馬丁', '亞瑟']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.35.world_lore_info
  Field required [type=missing, input_value={'name': '「快樂派系...': ['亞瑟', '馬丁']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.36.world_lore_info
  Field required [type=missing, input_value={'name': '「規矩派系...莉絲', '夏卡爾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.37.world_lore_info
  Field required [type=missing, input_value={'name': '費奇與其子...瑪斯', '愛蓮娜']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.38.world_lore_info
  Field required [type=missing, input_value={'name': '蓋博太太', ...博太太', '提姆']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.39.world_lore_info
  Field required [type=missing, input_value={'name': '薩格納將軍..., '維利爾斯勳爵']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.40.world_lore_info
  Field required [type=missing, input_value={'name': '艾莉諾', 'al...', '薩格納將軍']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.41.world_lore_info
  Field required [type=missing, input_value={'name': '菲利普', 'al...', '薩格納將軍']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.42.world_lore_info
  Field required [type=missing, input_value={'name': '阿拉里克', ... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.43.world_lore_info
  Field required [type=missing, input_value={'name': '赫克托皇子...s': ['赫克托皇子']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.44.world_lore_info
  Field required [type=missing, input_value={'name': '三皇女伊索...ties': ['伊索爾德']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.45.world_lore_info
  Field required [type=missing, input_value={'name': '博林', 'alias...d_entities': ['博林']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.46.world_lore_info
  Field required [type=missing, input_value={'name': '卡爾•維利...•維利爾斯勳爵']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.47.world_lore_info
  Field required [type=missing, input_value={'name': '絲月', 'alias... '莉莉絲', '湯姆']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.48.world_lore_info
  Field required [type=missing, input_value={'name': '湯姆', 'alias...斯勳爵', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.49.world_lore_info
  Field required [type=missing, input_value={'name': '米婭', 'alias...爵', '瓦勒留斯']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.50.world_lore_info
  Field required [type=missing, input_value={'name': '卡蓮', 'alias...', '凱爾', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.51.world_lore_info
  Field required [type=missing, input_value={'name': '凱爾', 'alias...', '米婭', '艾拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.52.world_lore_info
  Field required [type=missing, input_value={'name': '艾拉', 'alias...': ['艾拉', '凱爾']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.53.world_lore_info
  Field required [type=missing, input_value={'name': '瓦勒留斯神...勒留斯', '米婭']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.54.world_lore_info
  Field required [type=missing, input_value={'name': '索菲亞', 'al... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.55.world_lore_info
  Field required [type=missing, input_value={'name': '漢德瑞克師... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.56.world_lore_info
  Field required [type=missing, input_value={'name': '奧斯華', 'al... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.57.world_lore_info
  Field required [type=missing, input_value={'name': '艾諾拉', 'al... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.58.world_lore_info
  Field required [type=missing, input_value={'name': '巴納比', 'al... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.59.world_lore_info
  Field required [type=missing, input_value={'name': '莉娜', 'alias... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.60.world_lore_info
  Field required [type=missing, input_value={'name': '貝拉', 'alias... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.61.world_lore_info
  Field required [type=missing, input_value={'name': '諾拉', 'alias... 'related_entities': []}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.62.world_lore_info
  Field required [type=missing, input_value={'name': '澤拉', 'alias...': ['澤拉', '班恩']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.63.world_lore_info
  Field required [type=missing, input_value={'name': '班恩', 'alias...': ['班恩', '澤拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.64.world_lore_info
  Field required [type=missing, input_value={'name': '布里奇特', ...ties': ['布里奇特']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.65.world_lore_info
  Field required [type=missing, input_value={'name': '瓦萊麗', 'al...ntities': ['瓦萊麗']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.66.world_lore_info
  Field required [type=missing, input_value={'name': '高爾', 'alias...['高爾', '克拉拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.67.world_lore_info
  Field required [type=missing, input_value={'name': '翠絲', 'alias...['翠絲', '克拉拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.68.world_lore_info
  Field required [type=missing, input_value={'name': '迪茜', 'alias...['迪茜', '克拉拉']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.69.world_lore_info
  Field required [type=missing, input_value={'name': '朱利安', 'al...利安', '莉莉絲']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.70.world_lore_info
  Field required [type=missing, input_value={'name': '阿利斯特', ...斯特', '莉莉絲']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.71.world_lore_info
  Field required [type=missing, input_value={'name': '瑪莉', 'alias...': ['瑪莉', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.72.world_lore_info
  Field required [type=missing, input_value={'name': '愛莉莎', 'al...['愛莉莎', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.73.world_lore_info
  Field required [type=missing, input_value={'name': '安娜', 'alias...': ['安娜', '絲月']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.74.world_lore_info
  Field required [type=missing, input_value={'name': '里斯', 'alias...': ['里斯', '瑪倫']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.75.world_lore_info
  Field required [type=missing, input_value={'name': '瑪倫', 'alias...': ['瑪倫', '里斯']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
results.76.world_lore_info
  Field required [type=missing, input_value={'name': '提姆', 'alias...姆', '蓋博太太']}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
2025-10-01 00:50:43 - [INFO] - [512280345618546699] [RAG驱动解析 3/3] 正在合并所有 20 個批次的解析結果...
2025-10-01 00:50:43 - [INFO] - [512280345618546699] [RAG驱动解析 3/3] 数据合并完成。
2025-10-01 00:50:43 - [INFO] - [512280345618546699] [後台創世 3/6] 專職流水線解析完成。
2025-10-01 00:50:43 - [INFO] - [512280345618546699] [後台創世 4/6] 正在將解析出的 LORE 結果持久化到資料庫...
2025-10-01 00:50:43 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'npc_profile' 類別處理 65 個實體...
2025-10-01 00:50:43 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-pro，剩餘 77618 秒)。
2025-10-01 00:52:25 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #0.
2025-10-01 00:52:25 - [INFO] - [512280345618546699] [實體解析] 成功生成解析計畫，包含 65 條決策。
2025-10-01 00:52:34 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'quest' 類別處理 3 個實體...
2025-10-01 00:52:34 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 11 個實體...
2025-10-01 00:52:35 - [INFO] - [512280345618546699] [後台創世 4/6] LORE 持久化完成。
2025-10-01 00:52:35 - [INFO] - [512280345618546699] [後台創世 5/6] 正在補完使用者與 AI 的角色檔案...
2025-10-01 00:52:39 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #2.
2025-10-01 00:52:39 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #1.
2025-10-01 00:52:39 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['user_profile', 'ai_profile']
2025-10-01 00:52:39 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-10-01 00:52:39 - [INFO] - [512280345618546699] [後台創世 6/6] 正在生成世界創世資訊...
2025-10-01 00:52:40 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #3) 遭遇內容審查或安全錯誤: BlockedPromptException。
2025-10-01 00:52:40 - [WARNING] - [512280345618546699] 最終生成鏈遭遇審查。啟動【最高指令集注入重試】策略...
2025-10-01 00:52:40 - [INFO] - [512280345618546699] 已對 Prompt 附加完整的核心指令集，正在進行強化重試...
2025-10-01 00:52:40 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #4 (針對模型 gemini-2.5-pro，剩餘 73858 秒)。
2025-10-01 00:52:40 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #5 (針對模型 gemini-2.5-pro，剩餘 77501 秒)。
2025-10-01 00:53:24 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #0.
2025-10-01 00:53:25 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['game_state']
2025-10-01 00:53:26 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-10-01 00:53:27 - [INFO] - [512280345618546699] [/start] 初始地點 '王都 > 城鎮市集區 > 咆哮壁爐酒館' 已成功生成並存入LORE。
2025-10-01 00:53:27 - [INFO] - [512280345618546699] [後台創世 7/7] 正在生成開場白...
2025-10-01 00:53:27 - [INFO] - [512280345618546699] [API Key Cooling] 跳過冷卻中的 API Key #1 (針對模型 gemini-2.5-pro，剩餘 82375 秒)。
2025-10-01 00:53:58 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #2.
2025-10-01 00:53:58 - [INFO] - [512280345618546699] [後台創世 7/7] 開場白生成完毕並發送...
2025-10-01 00:53:59 - [INFO] - [512280345618546699] [後台創世] 開場白發送完畢。
2025-10-01 00:53:59 - [INFO] - [512280345618546699] 後台創世流程結束，狀態鎖已釋放。
