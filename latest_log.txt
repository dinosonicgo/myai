### AI Lover Log - Last updated at 2025-09-22T20:01:58.658611 ###

2025-09-22 19:55:51 - [INFO] - [512280345618546699] (Canon Processor) 所有 33 个世界圣经文本块均已成功处理并存入 SQL 记忆库。
2025-09-22 19:55:52 - [INFO] - [512280345618546699] 開始智能解析世界聖經文本 (總長度: 26456)...
2025-09-22 19:55:52 - [INFO] - [512280345618546699] 世界聖經已被分割成 4 個文本塊進行處理。
2025-09-22 19:55:52 - [INFO] - [512280345618546699] 正在解析文本塊 1/4...
2025-09-22 19:55:57 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:55:57 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:55:57 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:55:57 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:55:57 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:55:57 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:55:57 - [INFO] - [512280345618546699] 正在解析文本塊 2/4...
2025-09-22 19:56:02 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:56:02 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:56:02 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:56:02 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:56:02 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:56:02 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:56:02 - [INFO] - [512280345618546699] 正在解析文本塊 3/4...
2025-09-22 19:56:07 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:56:07 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:56:07 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:56:07 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:56:07 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:56:07 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:56:07 - [INFO] - [512280345618546699] 正在解析文本塊 4/4...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:56:12 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:56:12 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:56:12 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:56:12 - [INFO] - [512280345618546699] 所有文本塊解析完成。總共通過主解析鏈/委婉化備援提取到 0 個NPC，0 個地點。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'npc_profile' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'npc_profile' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'location_info' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'location_info' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'item_info' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'item_info' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'creature_info' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'creature_info' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'quest' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'quest' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'world_lore' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] 世界聖經智能解析與 LORE 創建完成。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] LORE 數據已更新，正在強制重建 RAG 知識庫索引...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 36 條文檔用於構建 BM25。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] RAG 知識庫索引已成功更新。
2025-09-22 20:01:44 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-22 20:01:44 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-22 20:01:44 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-22 20:01:44 - [INFO] - Discord Bot is ready!
2025-09-22 20:01:47 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-22 20:01:47 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-22 20:01:48 - [INFO] - 已成功發送啟動成功通知給管理員。
