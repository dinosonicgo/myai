### AI Lover Log - Last updated at 2025-09-10T01:26:53.352648 ###

  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2312, in retrieve_and_summarize_memories
    retrieved_docs = await self.ainvoke_with_rotation(
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 3488, in ainvoke_with_rotation
    raise e
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 3445, in ainvoke_with_rotation
    result = await asyncio.wait_for(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\asyncio\tasks.py", line 445, in wait_for
    return fut.result()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\retrievers.py", line 323, in ainvoke
    result = await self._aget_relevant_documents(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain\retrievers\contextual_compression.py", line 69, in _aget_relevant_documents
    docs = await self.base_retriever.ainvoke(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain\retrievers\ensemble.py", line 153, in ainvoke
    result = await self.arank_fusion(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain\retrievers\ensemble.py", line 265, in arank_fusion
    retriever_docs = await asyncio.gather(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\retrievers.py", line 323, in ainvoke
    result = await self._aget_relevant_documents(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\vectorstores\base.py", line 1104, in _aget_relevant_documents
    docs = await self.vectorstore.asimilarity_search(query, **kwargs_)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\vectorstores\base.py", line 648, in asimilarity_search
    return await run_in_executor(None, self.similarity_search, query, k=k, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\runnables\config.py", line 617, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\runnables\config.py", line 608, in wrapper
    return func(*args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_chroma\vectorstores.py", line 681, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_chroma\vectorstores.py", line 781, in similarity_search_with_score
    query_embedding = self._embedding_function.embed_query(query)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\embeddings.py", line 256, in embed_query
    return self.embed_documents(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\embeddings.py", line 231, in embed_documents
    raise GoogleGenerativeAIError(f"Error embedding content: {e}") from e
langchain_google_genai._common.GoogleGenerativeAIError: Error embedding content: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]
2025-09-10 01:25:54 - [INFO] - [512280345618546699] (Graph) Node: perceive_and_set_view -> 正在基於意圖 'nsfw_descriptive' 统一处理感知与视角...
2025-09-10 01:25:54 - [INFO] - [512280345618546699] (View Mode) 检测到描述性意图，准备进入/更新远程视角。
2025-09-10 01:25:55 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['game_state']
2025-09-10 01:25:55 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-10 01:25:55 - [INFO] - [512280345618546699] (Perception Hub) GameState 已更新: mode=remote, path=['性神城']
2025-09-10 01:25:55 - [INFO] - [512280345618546699] (Graph|3) Node: query_lore -> 正在基於【安全查詢文本】 '這段手稿片段描繪了一個複雜的權力動態場景，其中一名女性信徒在...' 執行LORE查詢...
2025-09-10 01:25:55 - [INFO] - [512280345618546699] (LORE Querier) 已鎖定有效場景: 性神城
2025-09-10 01:25:55 - [INFO] - [512280345618546699] (LORE Querier) 在有效場景中找到 0 位常駐NPC。
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (LORE Querier) 提取到以下關鍵實體: ['溪语小屋', '性神教', '迷雾森林', '性神教徒', '性神城']
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (LORE Querier) 查詢到 3 條唯一的LORE記錄。
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (LORE Querier) 從安全查詢文本中提取並查詢到 3 條相關LORE。
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (LORE Querier) 經過上下文優先合併與過濾後，共鎖定 3 條LORE作為本回合上下文。
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (Graph) Node: assemble_context -> 正在将 3 条 LORE 记录组装为最终上下文...
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (Context Assembler) 上下文簡報組裝完畢。
2025-09-10 01:25:56 - [INFO] - [512280345618546699] (Graph|5) Node: expansion_decision -> 正在基於【安全查詢文本】 '這段手稿片段描繪了一個複雜的權力動態場景，其中一名女性信徒在...' 判斷是否擴展...
2025-09-10 01:25:57 - [INFO] - [512280345618546699] (Graph|5) LORE擴展決策: True。理由: 劇本要求描寫一個包含女性信徒和三名男性角色的複雜權力動態場景，但現有演員名單為空，因此需要擴展演員名單以滿足場景需求。
2025-09-10 01:25:57 - [INFO] - [512280345618546699] (Graph|6A.1) Node: character_quantification -> 正在量化輸入中的角色...
2025-09-10 01:25:57 - [INFO] - [512280345618546699] (Graph|6A.1) 角色量化成功，識別出 4 個待創建角色。
2025-09-10 01:25:57 - [INFO] - [512280345618546699] (Graph|6A.2) Node: lore_expansion -> 正在為 4 個量化角色執行選角...
2025-09-10 01:26:03 - [INFO] - [512280345618546699] 已成功将【新】NPC '塞蕾娜' 添加到場景 '性神城'。
2025-09-10 01:26:03 - [INFO] - [512280345618546699] 已成功将【新】NPC '巴納比' 添加到場景 '性神城'。
2025-09-10 01:26:04 - [INFO] - [512280345618546699] 已成功将【新】NPC '艾爾文' 添加到場景 '性神城'。
2025-09-10 01:26:04 - [INFO] - [512280345618546699] 已成功将【新】NPC '馬丁' 添加到場景 '性神城'。
2025-09-10 01:26:04 - [INFO] - [512280345618546699] (Graph|6A.2) 選角完成，創建了 4 位新角色: 塞蕾娜, 巴納比, 艾爾文, 馬丁.
2025-09-10 01:26:04 - [INFO] - [512280345618546699] (Graph|6A.2) 已將 4 位角色 (新舊合併) 成功綁定為本回合的規劃主體。
2025-09-10 01:26:04 - [INFO] - [512280345618546699] (Router) Routing to planner. Intent: 'nsfw_descriptive', Final Viewing Mode: 'remote'
2025-09-10 01:26:04 - [INFO] - [512280345618546699] (Graph|NSFW Outline Pt.1) Node: nsfw_breakthrough -> 正在生成NSFW故事大纲草稿...
2025-09-10 01:26:04 - [INFO] - [512280345618546699] LLM 實例已使用 API Key #4 創建。下一次將使用 Key #5。
2025-09-10 01:26:04 - [INFO] - [512280345618546699] (History Summarizer) 正在樂觀嘗試直接摘要原始歷史文本...
2025-09-10 01:26:05 - [INFO] - [512280345618546699] (History Summarizer) 直接摘要成功。
2025-09-10 01:26:16 - [INFO] - [512280345618546699] (Graph|NSFW Outline Pt.2) Node: nsfw_refinement -> 正在润色NSFW故事大纲...
