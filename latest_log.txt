### AI Lover Log - Last updated at 2025-09-11T22:51:12.478374 ###

}
]

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2461, in add_canon_to_vector_store
    embeddings = await self.embeddings.aembed_documents(texts_to_embed)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\embeddings\embeddings.py", line 67, in aembed_documents
    return await run_in_executor(None, self.embed_documents, texts)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\runnables\config.py", line 617, in run_in_executor
    return await asyncio.get_running_loop().run_in_executor(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\concurrent\futures\thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\runnables\config.py", line 608, in wrapper
    return func(*args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\embeddings.py", line 231, in embed_documents
    raise GoogleGenerativeAIError(f"Error embedding content: {e}") from e
langchain_google_genai._common.GoogleGenerativeAIError: Error embedding content: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]
2025-09-11 22:49:00 - [INFO] - [512280345618546699] (Setup Graph|1/4) 步驟 A: 向量化儲存完成。
2025-09-11 22:49:00 - [INFO] - [512280345618546699] (Setup Graph|1/4) 步驟 B: 正在進行 LORE 智能解析...
2025-09-11 22:49:00 - [INFO] - [512280345618546699] 開始智能解析世界聖經文本...
2025-09-11 22:49:00 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 3)
2025-09-11 22:49:00 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:00 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 5)
2025-09-11 22:49:00 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 0)
2025-09-11 22:49:04 - [INFO] - [512280345618546699] 正在處理 'npc_profile' 類別的 1 個實體...
2025-09-11 22:49:04 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 1)
2025-09-11 22:49:08 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:08 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 3)
2025-09-11 22:49:08 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 4)
2025-09-11 22:49:10 - [INFO] - [512280345618546699] 已為新實體 'DINO' (標準名: Dino) 創建了 LORE 條目，主鍵為 'Dino'。
2025-09-11 22:49:10 - [INFO] - [512280345618546699] 正在處理 'location_info' 類別的 1 個實體...
2025-09-11 22:49:14 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:14 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 0)
2025-09-11 22:49:14 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 1)
2025-09-11 22:49:15 - [INFO] - [512280345618546699] 已為新實體 '性神城' (標準名: 性神城) 創建了 LORE 條目，主鍵為 '性神城'。
2025-09-11 22:49:15 - [INFO] - [512280345618546699] 正在處理 'creature_info' 類別的 1 個實體...
2025-09-11 22:49:19 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:19 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 3)
2025-09-11 22:49:19 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 4)
2025-09-11 22:49:20 - [INFO] - [512280345618546699] 已為新實體 '天空龍' (標準名: 天空龍) 創建了 LORE 條目，主鍵為 '天空龍'。
2025-09-11 22:49:20 - [INFO] - [512280345618546699] 正在處理 'world_lore' 類別的 1 個實體...
2025-09-11 22:49:24 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:24 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 0)
2025-09-11 22:49:24 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 1)
2025-09-11 22:49:25 - [INFO] - [512280345618546699] 已為新實體 '性神恩澤' (標準名: 性神恩澤) 創建了 LORE 條目，主鍵為 '性神恩澤'。
2025-09-11 22:49:25 - [INFO] - [512280345618546699] 世界聖經智能解析與 LORE 創建完成。
2025-09-11 22:49:25 - [INFO] - [512280345618546699] (Setup Graph|1/4) 步驟 B: LORE 智能解析完成。
2025-09-11 22:49:25 - [INFO] - [512280345618546699] (Setup Graph|1/4) Node: process_canon -> 節點執行成功。
2025-09-11 22:49:25 - [INFO] - [512280345618546699] (Setup Graph|1/4|Flow Control) 為平滑 API 請求，將強制等待 5.0 秒後進入下一節點...
2025-09-11 22:49:30 - [INFO] - [512280345618546699] (Setup Graph|2/4) Node: complete_profiles_node -> 節點已啟動，準備補完角色檔案...
2025-09-11 22:49:30 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 2)
2025-09-11 22:49:33 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:33 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 4)
2025-09-11 22:49:33 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 5)
2025-09-11 22:49:34 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:34 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 1)
2025-09-11 22:49:34 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 2)
2025-09-11 22:49:40 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['user_profile', 'ai_profile']
2025-09-11 22:49:40 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-11 22:49:40 - [INFO] - [512280345618546699] (Setup Graph|2/4) Node: complete_profiles_node -> 節點執行成功。
2025-09-11 22:49:40 - [INFO] - [512280345618546699] (Setup Graph|2/4|Flow Control) 為平滑 API 請求，將強制等待 5.0 秒後進入下一節點...
2025-09-11 22:49:45 - [INFO] - [512280345618546699] (Setup Graph|3/4) Node: world_genesis -> 節點已啟動...
2025-09-11 22:49:45 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 3)
2025-09-11 22:49:45 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:45 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 5)
2025-09-11 22:49:45 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 0)
2025-09-11 22:49:49 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['game_state']
2025-09-11 22:49:49 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-11 22:49:50 - [INFO] - [512280345618546699] (Setup Graph|3/4) Node: world_genesis -> 節點執行成功。
2025-09-11 22:49:50 - [INFO] - [512280345618546699] (Setup Graph|3/4|Flow Control) 為平滑 API 請求，將強制等待 5.0 秒後進入下一節點...
2025-09-11 22:49:55 - [INFO] - [512280345618546699] (Setup Graph|4/4) Node: generate_opening_scene -> 節點已啟動...
2025-09-11 22:49:55 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 22:49:55 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 2)
2025-09-11 22:49:55 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 3)
2025-09-11 22:49:58 - [INFO] - [512280345618546699] (Setup Graph|4/4) Node: generate_opening_scene -> 節點執行成功。
2025-09-11 22:49:58 - [INFO] - [512280345618546699] /start 流程：LangGraph 設定圖執行完畢。
2025-09-11 22:49:58 - [INFO] - [512280345618546699] /start 流程：正在向使用者私訊發送開場白...
2025-09-11 22:49:58 - [INFO] - [512280345618546699] /start 流程：開場白發送完畢。設定流程成功結束。
