### AI Lover Log - Last updated at 2025-09-11T23:25:35.510295 ###

2025-09-11 23:20:33 - [INFO] - [512280345618546699] (Retriever Builder) ChromaDB 主要檢索器構建成功。
2025-09-11 23:20:34 - [INFO] - [512280345618546699] (Retriever Builder) 混合檢索器構建成功。
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 所有構建鏈的前置資源已準備就緒。
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 正在從資料庫恢復短期記憶...
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 成功恢復了 1 條對話記錄到短期記憶中。
2025-09-11 23:20:34 - [INFO] - 為使用者 512280345618546699 成功創建並初始化 AI 實例。
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 响应条件满足，启动 LangGraph 對話流程...
2025-09-11 23:20:34 - [INFO] - [512280345618546699] (Graph|1) Node: perceive_scene -> 正在感知场景...
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 2)
2025-09-11 23:20:34 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 4)
2025-09-11 23:20:34 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 5)
2025-09-11 23:20:35 - [WARNING] - [512280345618546699] (Graph|1) 场景感知链失败，启动【基于规则的备援推断】。
2025-09-11 23:20:35 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['game_state']
2025-09-11 23:20:35 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-11 23:20:35 - [INFO] - [512280345618546699] (Graph|1) 场景感知完成。最终视角: 'local', 目标地点: ['艾瑟利亞大陸', '迷霧森林深處']
2025-09-11 23:20:35 - [INFO] - [512280345618546699] (Graph|2) Node: retrieve_and_query -> 正在检索记忆与查询LORE...
2025-09-11 23:20:35 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 0)
2025-09-11 23:20:35 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:35 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 2)
2025-09-11 23:20:35 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 3)
2025-09-11 23:20:36 - [INFO] - [512280345618546699] (RAG Executor) [主方案] 正在使用混合檢索器 (Embedding + BM25) 進行檢索...
2025-09-11 23:20:36 - [WARNING] - [512280345618546699] (RAG Executor) [備援觸發] Embedding API 遭遇速率限制或錯誤。正在啟動純 BM25 備援方案...
2025-09-11 23:20:36 - [INFO] - [512280345618546699] (RAG Executor) [備援成功] 純 BM25 檢索成功。
2025-09-11 23:20:36 - [INFO] - [512280345618546699] (Batch Sanitizer) 檢索到 1 份文檔，正在進行批次清洗與摘要...
2025-09-11 23:20:36 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:36 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 5)
2025-09-11 23:20:36 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 0)
2025-09-11 23:20:38 - [INFO] - [512280345618546699] (Batch Sanitizer) 批次清洗成功，正在基於安全的文學概述進行最終摘要...
2025-09-11 23:20:38 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 1)
2025-09-11 23:20:38 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:38 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 3)
2025-09-11 23:20:38 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 4)
2025-09-11 23:20:40 - [INFO] - [512280345618546699] 已成功將 RAG 上下文提煉為事實要點。
2025-09-11 23:20:40 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 5)
2025-09-11 23:20:40 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:40 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 1)
2025-09-11 23:20:40 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 2)
2025-09-11 23:20:41 - [INFO] - [512280345618546699] (LORE Querier) 提取到以下關鍵實體: ['碧', 'DINO', '艾瑟利亞大陸', '迷霧森林深處']
2025-09-11 23:20:41 - [INFO] - [512280345618546699] (LORE Querier) 查詢到 2 條唯一的LORE記錄。
2025-09-11 23:20:41 - [INFO] - [512280345618546699] (Graph|2) 查询完成。检索到 2 条相关LORE。
2025-09-11 23:20:41 - [INFO] - [512280345618546699] (Graph|3) Node: expansion_decision_and_execution -> 正在决策是否扩展LORE...
2025-09-11 23:20:41 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 3)
2025-09-11 23:20:41 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:41 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 5)
2025-09-11 23:20:41 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 0)
2025-09-11 23:20:42 - [INFO] - [512280345618546699] (Graph|3) 决策结果：无需扩展。理由: 現有角色「碧」的描述與使用者輸入中的「碧」角色職責一致，該角色被要求執行「坐下」的服從性動作，這與其被動的性格特質相符。
2025-09-11 23:20:42 - [INFO] - [512280345618546699] (Graph|4) Node: preemptive_tool_call -> 正在解析前置工具調用...
2025-09-11 23:20:42 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 1)
2025-09-11 23:20:42 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:20:42 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 3)
2025-09-11 23:20:42 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 4)
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Graph|4) 解析到 1 個工具調用，準備執行...
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Executor) 準備執行工具 'update_character_profile'，參數: {'character_name': '碧', 'updates': {'current_action': '坐著'}}
2025-09-11 23:20:44 - [INFO] - [512280345618546699] 已成功更新角色 '碧' 的檔案，欄位: current_action。
2025-09-11 23:20:44 - [INFO] - [512280345618546699] 接收到 profile 更新請求: ['user_profile', 'ai_profile', 'game_state']
2025-09-11 23:20:44 - [INFO] - [512280345618546699] Profile 更新並持久化成功。
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Executor) 工具 'update_character_profile' 執行成功，結果: 已成功更新角色 '碧' 的檔案，欄位: current_action。
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Graph|4) 前置工具執行完畢。
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Graph|5) Node: assemble_world_snapshot -> 正在組裝【當前場景事實】...
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Graph|5) 【當前場景事實】組裝完畢。
2025-09-11 23:20:44 - [INFO] - [512280345618546699] (Graph|6) Node: final_generation -> 启动最终生成流程...
2025-09-11 23:20:44 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-pro' (優先級 1/3) ---
2025-09-11 23:20:44 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 0)
2025-09-11 23:20:44 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-pro' 實例 (API Key index: 1)
2025-09-11 23:21:18 - [INFO] - [512280345618546699] (Graph|6) 最终生成流程完成。
2025-09-11 23:21:18 - [INFO] - [512280345618546699] (Graph|7) Node: validate_and_persist -> 正在驗證、學習與持久化...
2025-09-11 23:21:18 - [INFO] - [512280345618546699] (Graph|7) 正在啟動事後 LORE 學習...
2025-09-11 23:21:18 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 2)
2025-09-11 23:21:18 - [INFO] - [512280345618546699] --- 開始嘗試模型: 'gemini-2.5-flash-lite' (優先級 1/1) ---
2025-09-11 23:21:18 - [INFO] - [512280345618546699] 正在創建 Embedding 模型實例 (API Key index: 4)
2025-09-11 23:21:18 - [INFO] - [512280345618546699] 正在創建模型 'gemini-2.5-flash-lite' 實例 (API Key index: 5)
2025-09-11 23:21:20 - [INFO] - [512280345618546699] (Graph|7) 事後學習到 1 條新 LORE，正在後台保存...
2025-09-11 23:21:20 - [INFO] - [512280345618546699] (Graph|7) 對話歷史已更新並準備保存到 DB。
2025-09-11 23:21:20 - [INFO] - [512280345618546699] (Graph|7) 狀態持久化完成。
2025-09-11 23:21:20 - [INFO] - --- [512280345618546699] 開始串行執行已淨化的場景擴展計畫 (共 1 個任務) ---
2025-09-11 23:21:22 - [INFO] - [512280345618546699] 對話記錄已成功保存到 SQL 資料庫。
2025-09-11 23:21:22 - [WARNING] - [512280345618546699] [優雅降級] 在保存記憶到 ChromaDB 時遭遇 API 錯誤: Error embedding content: 429 You exceeded your current quota, please check your plan and billing details. For more information on this error, head to: https://ai.google.dev/gemini-api/docs/rate-limits. [violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerMinutePerUserPerProjectPerModel-FreeTier"
}
violations {
  quota_metric: "generativelanguage.googleapis.com/embed_content_free_tier_requests"
  quota_id: "EmbedContentRequestsPerDayPerUserPerProjectPerModel-FreeTier"
}
, links {
  description: "Learn more about Gemini API quotas"
  url: "https://ai.google.dev/gemini-api/docs/rate-limits"
}
]。將跳過向量化，但 SQL 備援數據已保存。
2025-09-11 23:21:24 - [INFO] - --- [512280345618546699] 場景擴展計畫執行完畢 ---
2025-09-11 23:21:24 - [INFO] - [512280345618546699] 背景任務的工具上下文已清理。
