### AI Lover Log - Last updated at 2025-09-29T20:18:17.706508 ###

    raise error
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
sqlite3.OperationalError: no such column: users.context_snapshot_json

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1712, in start_reset_flow
    ai_instance = await self.get_or_create_ai_instance(user_id, is_setup_flow=True)
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1367, in get_or_create_ai_instance
    if await ai_instance.initialize():
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2313, in initialize
    result = await session.get(UserData, self.user_id)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 595, in get
    return await greenlet_spawn(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 3637, in get
    return self._get_impl(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 3817, in _get_impl
    return db_load_fn(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: users.context_snapshot_json
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.ai_name AS users_ai_name, users.ai_settings AS users_ai_settings, users.affinity AS users_affinity, users.game_state AS users_game_state, users.one_instruction AS users_one_instruction, users.world_settings AS users_world_settings, users.user_profile AS users_user_profile, users.ai_profile AS users_ai_profile, users.response_style_prompt AS users_response_style_prompt, users.context_snapshot_json AS users_context_snapshot_json 
FROM users 
WHERE users.user_id = ?]
[parameters: ('512280345618546699',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-29 20:07:49 - [INFO] - æ‰€æœ‰æŒä¹…åŒ– UI è¦–åœ–å·²æˆåŠŸè¨»å†Šã€‚
2025-09-29 20:07:49 - [INFO] - æ­£åœ¨å˜—è©¦å°‡æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤ (Slash Commands) å…¨åŸŸåŒæ­¥åˆ° Discord...
2025-09-29 20:07:49 - [INFO] - âœ… æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤å…¨åŸŸåŒæ­¥æˆåŠŸï¼(æ³¨æ„ï¼šå…¨åŸŸæŒ‡ä»¤æ›´æ–°å¯èƒ½éœ€è¦é•·é”ä¸€å°æ™‚æ‰èƒ½åœ¨æ‰€æœ‰ä¼ºæœå™¨ç”Ÿæ•ˆ)
2025-09-29 20:07:49 - [INFO] - Discord Bot is ready!
2025-09-29 20:07:52 - [INFO] - ã€å¥åº·æª¢æŸ¥ & Keep-Aliveã€‘èƒŒæ™¯ä»»å‹™å·²å•Ÿå‹•ã€‚
2025-09-29 20:07:52 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-29 20:07:53 - [INFO] - å·²æˆåŠŸç™¼é€å•Ÿå‹•æˆåŠŸé€šçŸ¥çµ¦ç®¡ç†å“¡ã€‚
2025-09-29 20:08:16 - [INFO] - [512280345618546699] å¾Œå°é‡ç½®ä»»å‹™é–‹å§‹...
2025-09-29 20:08:16 - [INFO] - ä½¿ç”¨è€… 512280345618546699 æ²’æœ‰æ´»èºçš„ AI å¯¦ä¾‹ï¼Œå˜—è©¦å‰µå»º...
2025-09-29 20:08:16 - [ERROR] - [512280345618546699] å¾Œå°é‡ç½®ä»»å‹™å¤±æ•—: (sqlite3.OperationalError) no such column: users.context_snapshot_json
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.ai_name AS users_ai_name, users.ai_settings AS users_ai_settings, users.affinity AS users_affinity, users.game_state AS users_game_state, users.one_instruction AS users_one_instruction, users.world_settings AS users_world_settings, users.user_profile AS users_user_profile, users.ai_profile AS users_ai_profile, users.response_style_prompt AS users_response_style_prompt, users.context_snapshot_json AS users_context_snapshot_json 
FROM users 
WHERE users.user_id = ?]
[parameters: ('512280345618546699',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
sqlite3.OperationalError: no such column: users.context_snapshot_json

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1712, in start_reset_flow
    ai_instance = await self.get_or_create_ai_instance(user_id, is_setup_flow=True)
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1367, in get_or_create_ai_instance
    if await ai_instance.initialize():
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2313, in initialize
    result = await session.get(UserData, self.user_id)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 595, in get
    return await greenlet_spawn(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 3637, in get
    return self._get_impl(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 3817, in _get_impl
    return db_load_fn(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\loading.py", line 694, in load_on_pk_identity
    session.execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 146, in execute
    self._adapt_connection._handle_exception(error)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 298, in _handle_exception
    raise error
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\dialects\sqlite\aiosqlite.py", line 128, in execute
    self.await_(_cursor.execute(operation, parameters))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 48, in execute
    await self._execute(self._cursor.execute, sql, parameters)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\cursor.py", line 40, in _execute
    return await self._conn._execute(fn, *args, **kwargs)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 133, in _execute
    return await future
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\aiosqlite\core.py", line 106, in run
    result = function()
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: users.context_snapshot_json
[SQL: SELECT users.user_id AS users_user_id, users.username AS users_username, users.ai_name AS users_ai_name, users.ai_settings AS users_ai_settings, users.affinity AS users_affinity, users.game_state AS users_game_state, users.one_instruction AS users_one_instruction, users.world_settings AS users_world_settings, users.user_profile AS users_user_profile, users.ai_profile AS users_ai_profile, users.response_style_prompt AS users_response_style_prompt, users.context_snapshot_json AS users_context_snapshot_json 
FROM users 
WHERE users.user_id = ?]
[parameters: ('512280345618546699',)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-09-29 20:10:58 - [INFO] - æ‰€æœ‰æŒä¹…åŒ– UI è¦–åœ–å·²æˆåŠŸè¨»å†Šã€‚
2025-09-29 20:10:58 - [INFO] - æ­£åœ¨å˜—è©¦å°‡æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤ (Slash Commands) å…¨åŸŸåŒæ­¥åˆ° Discord...
2025-09-29 20:10:58 - [INFO] - âœ… æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤å…¨åŸŸåŒæ­¥æˆåŠŸï¼(æ³¨æ„ï¼šå…¨åŸŸæŒ‡ä»¤æ›´æ–°å¯èƒ½éœ€è¦é•·é”ä¸€å°æ™‚æ‰èƒ½åœ¨æ‰€æœ‰ä¼ºæœå™¨ç”Ÿæ•ˆ)
2025-09-29 20:10:58 - [INFO] - Discord Bot is ready!
2025-09-29 20:11:01 - [INFO] - ã€å¥åº·æª¢æŸ¥ & Keep-Aliveã€‘èƒŒæ™¯ä»»å‹™å·²å•Ÿå‹•ã€‚
2025-09-29 20:11:01 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-29 20:11:02 - [INFO] - å·²æˆåŠŸç™¼é€å•Ÿå‹•æˆåŠŸé€šçŸ¥çµ¦ç®¡ç†å“¡ã€‚
2025-09-29 20:12:31 - [INFO] - æ‰€æœ‰æŒä¹…åŒ– UI è¦–åœ–å·²æˆåŠŸè¨»å†Šã€‚
2025-09-29 20:12:31 - [INFO] - æ­£åœ¨å˜—è©¦å°‡æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤ (Slash Commands) å…¨åŸŸåŒæ­¥åˆ° Discord...
2025-09-29 20:12:31 - [INFO] - âœ… æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤å…¨åŸŸåŒæ­¥æˆåŠŸï¼(æ³¨æ„ï¼šå…¨åŸŸæŒ‡ä»¤æ›´æ–°å¯èƒ½éœ€è¦é•·é”ä¸€å°æ™‚æ‰èƒ½åœ¨æ‰€æœ‰ä¼ºæœå™¨ç”Ÿæ•ˆ)
2025-09-29 20:12:31 - [INFO] - Discord Bot is ready!
2025-09-29 20:12:34 - [INFO] - ã€å¥åº·æª¢æŸ¥ & Keep-Aliveã€‘èƒŒæ™¯ä»»å‹™å·²å•Ÿå‹•ã€‚
2025-09-29 20:12:34 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-29 20:12:34 - [INFO] - å·²æˆåŠŸç™¼é€å•Ÿå‹•æˆåŠŸé€šçŸ¥çµ¦ç®¡ç†å“¡ã€‚
2025-09-29 20:12:50 - [INFO] - [512280345618546699] å¾Œå°é‡ç½®ä»»å‹™é–‹å§‹...
2025-09-29 20:12:50 - [INFO] - ä½¿ç”¨è€… 512280345618546699 æ²’æœ‰æ´»èºçš„ AI å¯¦ä¾‹ï¼Œå˜—è©¦å‰µå»º...
2025-09-29 20:12:50 - [INFO] - [512280345618546699] æ ¸å¿ƒæ•¸æ“šæ¨¡æ¿ 'world_snapshot_template.txt' å·²æˆåŠŸåŠ è¼‰ã€‚
2025-09-29 20:12:50 - [INFO] - [512280345618546699] æ ¸å¿ƒå”è­° '00_supreme_directive.txt' å·²æˆåŠŸåŠ è¼‰ã€‚
2025-09-29 20:12:50 - [INFO] - [512280345618546699] æ­£åœ¨å‰µå»º Embedding æ¨¡å‹å¯¦ä¾‹ (API Key index: 0)
2025-09-29 20:12:50 - [INFO] - [512280345618546699] (Retriever Builder) æ­£åœ¨æ§‹å»ºæ··åˆ RAG æª¢ç´¢å™¨ (å¼·åˆ¶é‡å»º: False)...
2025-09-29 20:12:50 - [INFO] - [512280345618546699] (Retriever Builder) âœ… BM25 é—œéµå­—æª¢ç´¢å™¨å·²æˆåŠŸæ§‹å»ºï¼ŒåŒ…å« 30 æ¢æ–‡æª”ã€‚
2025-09-29 20:12:51 - [INFO] - [512280345618546699] (Retriever Builder) âœ… ChromaDB èªæ„æª¢ç´¢å™¨å·²æˆåŠŸåˆå§‹åŒ–ã€‚
2025-09-29 20:12:51 - [INFO] - [512280345618546699] (Retriever Builder) âœ… æˆåŠŸå‰µå»ºæ··åˆæª¢ç´¢å™¨ (Chroma + BM25)ã€‚
2025-09-29 20:12:51 - [INFO] - [512280345618546699] æ‰€æœ‰æ§‹å»ºéˆçš„å‰ç½®è³‡æºå·²æº–å‚™å°±ç·’ã€‚
2025-09-29 20:12:51 - [INFO] - ç‚ºä½¿ç”¨è€… 512280345618546699 æˆåŠŸå‰µå»ºä¸¦åˆå§‹åŒ– AI å¯¦ä¾‹ã€‚
2025-09-29 20:12:51 - [INFO] - [512280345618546699] æ­£åœ¨å¾è³‡æ–™åº«æ¢å¾©çŸ­æœŸå ´æ™¯è¨˜æ†¶...
2025-09-29 20:12:51 - [INFO] - [512280345618546699] æˆåŠŸæ¢å¾©äº† 1 å€‹å ´æ™¯çš„å°è©±æ­·å²ï¼Œç¸½è¨ˆ 1 æ¢è¨Šæ¯ã€‚
2025-09-29 20:12:51 - [INFO] - [512280345618546699] æ­£åœ¨é—œé–‰ AI å¯¦ä¾‹ä¸¦é‡‹æ”¾è³‡æº...
2025-09-29 20:12:51 - [INFO] - [512280345618546699] ChromaDB å¾Œå°æœå‹™å·²è«‹æ±‚åœæ­¢ã€‚
2025-09-29 20:12:52 - [INFO] - [512280345618546699] AI å¯¦ä¾‹è³‡æºå·²é‡‹æ”¾ã€‚
2025-09-29 20:12:54 - [INFO] - [512280345618546699] æ­£åœ¨æ¸…é™¤æ‰€æœ‰çŸ­æœŸå ´æ™¯è¨˜æ†¶...
2025-09-29 20:12:54 - [INFO] - [512280345618546699] å·²æˆåŠŸå¾è³‡æ–™åº«ä¸­åˆªé™¤ 1 æ¢å ´æ™¯æ­·å²è¨˜éŒ„ã€‚
2025-09-29 20:12:58 - [INFO] - [512280345618546699] (UI Event) Persistent 'StartSetupView' button clicked.
2025-09-29 20:13:03 - [INFO] - [512280345618546699] (UI Event) WorldSettingsModal submitted. is_setup_flow: True
2025-09-29 20:13:04 - [INFO] - ä½¿ç”¨è€… 512280345618546699 æ²’æœ‰æ´»èºçš„ AI å¯¦ä¾‹ï¼Œå˜—è©¦å‰µå»º...
2025-09-29 20:13:04 - [INFO] - [512280345618546699] è™•æ–¼è¨­å®šæµç¨‹ä¸­ï¼Œå³ä½¿è³‡æ–™åº«ç„¡è¨˜éŒ„ï¼Œä¹Ÿå‰µå»ºä¸€å€‹è‡¨æ™‚çš„è¨˜æ†¶é«”å¯¦ä¾‹ã€‚
2025-09-29 20:13:04 - [INFO] - [512280345618546699] æ ¸å¿ƒæ•¸æ“šæ¨¡æ¿ 'world_snapshot_template.txt' å·²æˆåŠŸåŠ è¼‰ã€‚
2025-09-29 20:13:04 - [INFO] - [512280345618546699] æ ¸å¿ƒå”è­° '00_supreme_directive.txt' å·²æˆåŠŸåŠ è¼‰ã€‚
2025-09-29 20:13:04 - [INFO] - [512280345618546699] æ­£åœ¨å‰µå»º Embedding æ¨¡å‹å¯¦ä¾‹ (API Key index: 0)
2025-09-29 20:13:04 - [INFO] - [512280345618546699] (Retriever Builder) æ­£åœ¨æ§‹å»ºæ··åˆ RAG æª¢ç´¢å™¨ (å¼·åˆ¶é‡å»º: False)...
2025-09-29 20:13:04 - [INFO] - [512280345618546699] (Retriever Builder) âš ï¸ SQL çŸ¥è­˜åº«ç‚ºç©ºï¼ŒBM25 æª¢ç´¢å™¨æœªåˆå§‹åŒ–ã€‚
2025-09-29 20:13:04 - [ERROR] - [512280345618546699] (Retriever Builder) ğŸ”¥ åˆå§‹åŒ– ChromaDB æª¢ç´¢å™¨æ™‚ç™¼ç”ŸéŒ¯èª¤: Could not connect to tenant default_tenant. Are you sure it exists?
Traceback (most recent call last):
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\chromadb\api\client.py", line 460, in _validate_tenant_database
    self._admin_client.get_tenant(name=tenant)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\chromadb\api\client.py", line 517, in get_tenant
    return self._server.get_tenant(name=name)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\chromadb\api\rust.py", line 165, in get_tenant
    tenant = self.bindings.get_tenant(name)
AttributeError: 'RustBindingsAPI' object has no attribute 'bindings'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 508, in _load_or_build_rag_retriever
    client=chromadb.PersistentClient(path=self.vector_store_path)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\chromadb\__init__.py", line 164, in PersistentClient
    return ClientCreator(tenant=tenant, database=database, settings=settings)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\chromadb\api\client.py", line 87, in __init__
    self._validate_tenant_database(tenant=self.tenant, database=self.database)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\chromadb\api\client.py", line 469, in _validate_tenant_database
    raise ValueError(
ValueError: Could not connect to tenant default_tenant. Are you sure it exists?
2025-09-29 20:13:04 - [ERROR] - [512280345618546699] (Retriever Builder) ğŸ”¥ æ‰€æœ‰æª¢ç´¢å™¨å‡åˆå§‹åŒ–å¤±æ•—ï¼RAG ç³»çµ±å°‡è¿”å›ç©ºçµæœã€‚
2025-09-29 20:13:04 - [INFO] - [512280345618546699] æ‰€æœ‰æ§‹å»ºéˆçš„å‰ç½®è³‡æºå·²æº–å‚™å°±ç·’ã€‚
2025-09-29 20:13:04 - [INFO] - [512280345618546699] æ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['world_settings']
2025-09-29 20:13:04 - [WARNING] - [512280345618546699] åœ¨æŒä¹…åŒ–æ›´æ–°æ™‚æ‰¾ä¸åˆ°ä½¿ç”¨è€…è³‡æ–™ï¼Œå°‡å‰µå»ºæ–°è¨˜éŒ„ã€‚
2025-09-29 20:13:04 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-09-29 20:13:05 - [INFO] - [512280345618546699] (UI Event) Persistent 'ContinueToUserSetupView' button clicked.
2025-09-29 20:13:15 - [INFO] - [512280345618546699] (UI Event) CharacterSettingsModal submitted for profile_type: 'user', is_setup_flow: True
2025-09-29 20:13:15 - [INFO] - [512280345618546699] æ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['user_profile']
2025-09-29 20:13:15 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-09-29 20:13:17 - [INFO] - [512280345618546699] (UI Event) Persistent 'ContinueToAiSetupView' button clicked.
2025-09-29 20:13:27 - [INFO] - [512280345618546699] (UI Event) CharacterSettingsModal submitted for profile_type: 'ai', is_setup_flow: True
2025-09-29 20:13:27 - [INFO] - [512280345618546699] æ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['ai_profile']
2025-09-29 20:13:27 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-09-29 20:13:30 - [INFO] - [512280345618546699] ç¨ç«‹çš„å¾Œå°å‰µä¸–æµç¨‹å·²ç‚ºç”¨æˆ¶å•Ÿå‹•ã€‚
2025-09-29 20:13:30 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 2/4] æ­£åœ¨è£œå®Œè§’è‰²æª”æ¡ˆ...
2025-09-29 20:13:32 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #1.
2025-09-29 20:13:33 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #2.
2025-09-29 20:13:33 - [INFO] - [512280345618546699] æ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['user_profile', 'ai_profile']
2025-09-29 20:13:33 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-09-29 20:13:33 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 3/4] æ­£åœ¨ç”Ÿæˆä¸–ç•Œå‰µä¸–è³‡è¨Š...
2025-09-29 20:13:36 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #3.
2025-09-29 20:13:36 - [INFO] - [512280345618546699] æ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['game_state']
2025-09-29 20:13:37 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-09-29 20:13:37 - [INFO] - [512280345618546699] [/start] åˆå§‹åœ°é» 'è‰¾ç‘äºå¤§é™¸ > è¿·éœ§æ£®æ— > å¤æ¨¹ä¹‹å¿ƒ' å·²æˆåŠŸç”Ÿæˆä¸¦å­˜å…¥LOREã€‚
2025-09-29 20:13:37 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 4/4] æ­£åœ¨ç”Ÿæˆé–‹å ´ç™½...
2025-09-29 20:14:05 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #4.
2025-09-29 20:14:05 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 4/4] é–‹å ´ç™½ç”Ÿæˆå®Œç•¢ã€‚
2025-09-29 20:14:05 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] é–‹å ´ç™½å·²æˆåŠŸå­˜å…¥å ´æ™¯ '512280345618546699_local_è‰¾ç‘äºå¤§é™¸_è¿·éœ§æ£®æ—_å¤æ¨¹ä¹‹å¿ƒ' çš„æ­·å²è¨˜éŒ„ä¸¦æŒä¹…åŒ–ã€‚
2025-09-29 20:14:05 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] æ­£åœ¨å‘ä½¿ç”¨è€…ç§è¨Šç™¼é€æœ€çµ‚é–‹å ´ç™½...
2025-09-29 20:14:06 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] é–‹å ´ç™½ç™¼é€å®Œç•¢ã€‚
2025-09-29 20:14:06 - [INFO] - [512280345618546699] å¾Œå°å‰µä¸–æµç¨‹çµæŸï¼Œç‹€æ…‹é–å·²é‡‹æ”¾ã€‚
2025-09-29 20:14:34 - [INFO] - [512280345618546699] å•Ÿå‹•ã€Œç´”ç²¹ç”Ÿæˆã€å°è©±æµç¨‹...
2025-09-29 20:14:34 - [INFO] - [512280345618546699] æ­£åœ¨å‡†å¤‡ç”Ÿæˆä¸Šä¸‹æ–‡...
2025-09-29 20:14:36 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #5.
2025-09-29 20:14:36 - [INFO] - [512280345618546699] [ä¸Šä¸‹æ–‡ç¯©é¸ in 'local' mode] æ ¸å¿ƒç›®æ¨™: ['DINO', 'ç¢§'], èƒŒæ™¯è§’è‰²: []
2025-09-29 20:14:36 - [INFO] - [512280345618546699] [RAGæŸ¥è©¢å¼·åŒ–] æŸ¥è©¢å·²æ“´å±•ç‚º: 'æœˆå…‰è•ˆæ˜¯ä»€éº¼? DINO ç¢§'
2025-09-29 20:14:36 - [ERROR] - è™•ç†ä½¿ç”¨è€… 512280345618546699 çš„ã€Œç´”ç²¹ç”Ÿæˆã€æµç¨‹æ™‚ç™¼ç”Ÿç•°å¸¸: 'AILover' object has no attribute 'get_unified_generation_chain'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1517, in on_message
    final_response = await ai_instance.preprocess_and_generate(input_data)
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 3001, in preprocess_and_generate
    final_prompt_template = self.get_unified_generation_chain()
AttributeError: 'AILover' object has no attribute 'get_unified_generation_chain'. Did you mean: 'get_entity_extraction_chain'?
2025-09-29 20:18:03 - [INFO] - æ‰€æœ‰æŒä¹…åŒ– UI è¦–åœ–å·²æˆåŠŸè¨»å†Šã€‚
2025-09-29 20:18:03 - [INFO] - æ­£åœ¨å˜—è©¦å°‡æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤ (Slash Commands) å…¨åŸŸåŒæ­¥åˆ° Discord...
2025-09-29 20:18:04 - [INFO] - âœ… æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤å…¨åŸŸåŒæ­¥æˆåŠŸï¼(æ³¨æ„ï¼šå…¨åŸŸæŒ‡ä»¤æ›´æ–°å¯èƒ½éœ€è¦é•·é”ä¸€å°æ™‚æ‰èƒ½åœ¨æ‰€æœ‰ä¼ºæœå™¨ç”Ÿæ•ˆ)
2025-09-29 20:18:04 - [INFO] - Discord Bot is ready!
2025-09-29 20:18:07 - [INFO] - ã€å¥åº·æª¢æŸ¥ & Keep-Aliveã€‘èƒŒæ™¯ä»»å‹™å·²å•Ÿå‹•ã€‚
2025-09-29 20:18:07 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-29 20:18:07 - [INFO] - å·²æˆåŠŸç™¼é€å•Ÿå‹•æˆåŠŸé€šçŸ¥çµ¦ç®¡ç†å“¡ã€‚
