### AI Lover Log - Last updated at 2025-09-22T19:58:09.430896 ###

2025-09-22 19:55:09 - [INFO] - [512280345618546699] /start 流程：正在向使用者私訊發送開場白...
2025-09-22 19:55:10 - [INFO] - [512280345618546699] /start 流程：開場白發送完畢。設定流程成功結束。
2025-09-22 19:55:51 - [INFO] - [512280345618546699] 核心數據模板 'world_snapshot_template.txt' 已成功加載。
2025-09-22 19:55:51 - [INFO] - [512280345618546699] 核心協議模板 '00_supreme_directive.txt' 已成功加載並設置。
2025-09-22 19:55:51 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 3 條文檔用於構建 BM25。
2025-09-22 19:55:51 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-22 19:55:51 - [INFO] - [512280345618546699] 所有構建鏈的前置資源已準備就緒。
2025-09-22 19:55:51 - [INFO] - [512280345618546699] (Canon Processor) 所有 33 个世界圣经文本块均已成功处理并存入 SQL 记忆库。
2025-09-22 19:55:52 - [INFO] - [512280345618546699] 開始智能解析世界聖經文本 (總長度: 26456)...
2025-09-22 19:55:52 - [INFO] - [512280345618546699] 世界聖經已被分割成 4 個文本塊進行處理。
2025-09-22 19:55:52 - [INFO] - [512280345618546699] 正在解析文本塊 1/4...
2025-09-22 19:55:57 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:55:57 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:55:57 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:55:57 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:55:57 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:55:57 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:55:57 - [INFO] - [512280345618546699] 正在解析文本塊 2/4...
2025-09-22 19:56:02 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:56:02 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:56:02 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:56:02 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:56:02 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:56:02 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:56:02 - [INFO] - [512280345618546699] 正在解析文本塊 3/4...
2025-09-22 19:56:07 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:56:07 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:56:07 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:56:07 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:56:07 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:56:07 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:56:07 - [INFO] - [512280345618546699] 正在解析文本塊 4/4...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] [階段 1/3] 嘗試主要解析鏈...
2025-09-22 19:56:12 - [WARNING] - [512280345618546699] [階段 1/3] 主要解析失敗: '"name"'。進入下一階段。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] [階段 2/3] 嘗試委婉化重試策略...
2025-09-22 19:56:12 - [WARNING] - [512280345618546699] [階段 2/3] 委婉化重試失敗。進入終極備援。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] [階段 3/3] 啟動終極備援：原文 LORE 提取...
2025-09-22 19:56:12 - [ERROR] - [512280345618546699] [階段 3/3] 終極備援流程執行時發生未知錯誤: '"tool_name"'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1864, in parse_and_create_lore_from_canon
    full_prompt = canon_parser_template.format(canon_text=doc.page_content)
KeyError: '"name"'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1892, in parse_and_create_lore_from_canon
    extraction_prompt = extraction_prompt_template.format(
KeyError: '"tool_name"'
2025-09-22 19:56:12 - [INFO] - [512280345618546699] 所有文本塊解析完成。總共通過主解析鏈/委婉化備援提取到 0 個NPC，0 個地點。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'npc_profile' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'npc_profile' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'location_info' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'location_info' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'item_info' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'item_info' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'creature_info' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'creature_info' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'quest' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'quest' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 0 個實體...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (_resolve_and_save) 'world_lore' 類別的實體處理完畢。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] 世界聖經智能解析與 LORE 創建完成。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] LORE 數據已更新，正在強制重建 RAG 知識庫索引...
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 36 條文檔用於構建 BM25。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-22 19:56:12 - [INFO] - [512280345618546699] RAG 知識庫索引已成功更新。
