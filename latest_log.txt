### AI Lover Log - Last updated at 2025-10-05T13:50:30.697543 ###

2025-10-05 13:05:58 - [INFO] - [512280345618546699] [Data Reset] å‘é‡å„²å­˜ç›®éŒ„ 'D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\data\vector_stores\512280345618546699' å·²æˆåŠŸåˆªé™¤ã€‚
2025-10-05 13:05:58 - [INFO] - [512280345618546699] [Data Reset] è³‡æ–™é‡ç½®æµç¨‹å·²å…¨éƒ¨å®Œæˆã€‚
2025-10-05 13:06:00 - [INFO] - [512280345618546699] (UI Event) Persistent 'StartSetupView' button clicked.
2025-10-05 13:06:07 - [INFO] - ä½¿ç”¨è€… 512280345618546699 æ²’æœ‰æ´»èºçš„ AI å¯¦ä¾‹ï¼Œå˜—è©¦å‰µå»º...
2025-10-05 13:06:07 - [INFO] - [512280345618546699] è™•æ–¼è¨­å®šæµç¨‹ä¸­ï¼Œå³ä½¿è³‡æ–™åº«ç„¡è¨˜éŒ„ï¼Œä¹Ÿå‰µå»ºä¸€å€‹è‡¨æ™‚çš„è¨˜æ†¶é«”å¯¦ä¾‹ã€‚
2025-10-05 13:06:07 - [INFO] - [512280345618546699] æ ¸å¿ƒæ•¸æ“šæ¨¡æ¿ 'world_snapshot_template.txt' å·²æˆåŠŸåŠ è¼‰ã€‚
2025-10-05 13:06:07 - [INFO] - [512280345618546699] æ ¸å¿ƒå”è­° '00_supreme_directive.txt' å·²æˆåŠŸåŠ è¼‰ã€‚
2025-10-05 13:06:07 - [INFO] - âœ… [Embedding Loader] æª¢æ¸¬åˆ°æœ¬åœ°æ¨¡åž‹è·¯å¾‘ï¼Œæ­£åœ¨å˜—è©¦å¾ž 'D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\models\stella-base-zh-v2' åŠ è¼‰...
2025-10-05 13:06:09 - [INFO] - âœ… [Embedding Loader] æœ¬åœ° Embedding æ¨¡åž‹å¯¦ä¾‹å‰µå»ºæˆåŠŸã€‚
2025-10-05 13:06:09 - [INFO] - [512280345618546699] æ‰€æœ‰è¼•é‡ç´šå‰ç½®è³‡æºå·²æº–å‚™å°±ç·’ (RAG å‰µå»ºå·²å»¶é²)ã€‚
2025-10-05 13:06:09 - [INFO] - [512280345618546699] æŽ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['world_settings']
2025-10-05 13:06:09 - [WARNING] - [512280345618546699] åœ¨æŒä¹…åŒ–æ›´æ–°æ™‚æ‰¾ä¸åˆ°ä½¿ç”¨è€…è³‡æ–™ï¼Œå°‡å‰µå»ºæ–°è¨˜éŒ„ã€‚
2025-10-05 13:06:09 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-10-05 13:06:12 - [INFO] - [512280345618546699] (UI Event) Persistent 'ContinueToUserSetupView' button clicked.
2025-10-05 13:06:29 - [INFO] - [512280345618546699] (UI Event) CharacterSettingsModal submitted for profile_type: 'user', is_setup_flow: True
2025-10-05 13:06:29 - [INFO] - [512280345618546699] æŽ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['user_profile']
2025-10-05 13:06:30 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-10-05 13:06:31 - [INFO] - [512280345618546699] (UI Event) Persistent 'ContinueToAiSetupView' button clicked.
2025-10-05 13:06:59 - [INFO] - [512280345618546699] (UI Event) CharacterSettingsModal submitted for profile_type: 'ai', is_setup_flow: True
2025-10-05 13:07:00 - [INFO] - [512280345618546699] æŽ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['ai_profile']
2025-10-05 13:07:00 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-10-05 13:07:02 - [INFO] - [512280345618546699] [å‰µä¸–æµç¨‹] æª”æ¡ˆä¸Šå‚³é–‹å§‹ï¼Œå·²è¨­å®š active_setups ç‹€æ…‹éŽ–ã€‚
2025-10-05 13:07:12 - [INFO] - [512280345618546699] (on_message) åµæ¸¬åˆ°ç”¨æˆ¶è™•æ–¼æ´»èºçš„å‰µä¸–æµç¨‹ä¸­ï¼Œå·²å¿½ç•¥å¸¸è¦è¨Šæ¯ '...' ä»¥é˜²æ­¢ç«¶çˆ­ã€‚
2025-10-05 13:07:14 - [INFO] - [512280345618546699] [å‰µä¸–æµç¨‹ v65.1] åŽŸç”Ÿ Python é©…å‹•çš„æµç¨‹å·²å•Ÿå‹•ã€‚
2025-10-05 13:07:14 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] æ­£åœ¨å°‡ä¸–ç•Œè–ç¶“åŽŸæ–‡åˆ†å‰²æˆæ–‡æª”...
2025-10-05 13:07:14 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] æ­£åœ¨è§¸ç™¼ RAG ç´¢å¼•å‰µå§‹æ§‹å»º...
2025-10-05 13:07:14 - [INFO] - [512280345618546699] (Retriever Builder) é€²å…¥å¤–éƒ¨æ–‡æª”æ³¨å…¥æ¨¡å¼ï¼Œå°‡ä½¿ç”¨ 36 æ¢å‚³å…¥æ–‡æª”æ§‹å»ºç´”å‘é‡ç´¢å¼•...
2025-10-05 13:08:00 - [INFO] - [512280345618546699] (Retriever Builder) âœ… ç´”å‘é‡æª¢ç´¢å™¨å·²æˆåŠŸå¾žå¤–éƒ¨æ–‡æª”æ§‹å»ºã€‚
2025-10-05 13:08:00 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] RAG ç´¢å¼•æ§‹å»ºå®Œæˆï¼Œæº–å‚™åŸ·è¡ŒåŽŸç”Ÿå‰µä¸–æ­¥é©Ÿ...
2025-10-05 13:08:00 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–-åŽŸç”Ÿ] æ­¥é©Ÿ 1/2: æ­£åœ¨è£œå®Œè§’è‰²æª”æ¡ˆ...
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:08:03 - [INFO] - [512280345618546699] æŽ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['user_profile', 'ai_profile']
2025-10-05 13:08:03 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–-åŽŸç”Ÿ] è§’è‰²æª”æ¡ˆè£œå®ŒæˆåŠŸã€‚
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–-åŽŸç”Ÿ] æ­¥é©Ÿ 2/2: æ­£åœ¨ç”Ÿæˆé–‹å ´ç™½...
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [/start] æ­£åœ¨ä½¿ç”¨ RAG æ™ºèƒ½é¸æ“‡ä¸¦å‰µä½œé–‹å ´å ´æ™¯...
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [å®žä½“åç§°æå– (v2.2)] æ­£åœ¨ä»ŽæŸ¥è¯¢ 'æ ¹æ“šé€™å€‹ä¸–ç•Œçš„æ ¸å¿ƒè¨­å®š(é€™æ˜¯ä¸€å€‹é­”æ³•çš„å¹»æƒ³ä¸–ç•Œã€‚)ä»¥åŠä¸»è§’ DINO å’Œ ç¢§ çš„èƒŒæ™¯ï¼Œç‚ºä»–å€‘çš„æ•…äº‹å°‹...' ä¸­åˆ†æžå®žä½“...
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] æŸ¥è©¢å·²æ“´å±•ç‚º: 'çš„èƒŒæ™¯ï¼Œç‚ºä»–å€‘çš„æ•…äº‹å°‹æ‰¾ä¸€å€‹æœ€å¯Œæœ‰æˆ²åŠ‡æ€§ã€æœ€ç¬¦åˆä¸–ç•Œè§€çš„ã€é©åˆäºŒäººå‡ºå ´çš„ã€é é›¢æ¬ŠåŠ›ä¸­å¿ƒçš„éœæ…‹åˆå§‹å ´æ™¯æˆ–æƒ…å¢ƒã€‚ æ ¹æ“šé€™å€‹ä¸–ç•Œçš„æ ¸å¿ƒè¨­å®š(é€™æ˜¯ä¸€å€‹é­”æ³•çš„å¹»æƒ³ä¸–ç•Œã€‚)ä»¥åŠä¸»è§’ DINO ç¢§ å’Œ'
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] ç²—ç•¥æª¢ç´¢æˆåŠŸï¼Œç²å¾— 20 ä»½å€™é¸æ–‡æª”ã€‚
2025-10-05 13:08:03 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] âœ… æˆåŠŸæ‹¼æŽ¥å…¨éƒ¨ 20 æ¢åŽŸå§‹æ–‡æª”ä½œç‚º summary_contextã€‚
2025-10-05 13:08:33 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #0.
2025-10-05 13:08:33 - [INFO] - [512280345618546699] [/start] é–‹å ´ç™½å·²ç”Ÿæˆï¼Œæ­£åœ¨å¾žä¸­åå‘æå–æ¬Šå¨åœ°é»ž...
2025-10-05 13:08:34 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:08:34 - [INFO] - [512280345618546699] [/start] âœ… åœ°é»žæå–æˆåŠŸ: ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’ > å¾ŒèŠ±åœ’ã€‚æ­£åœ¨æ›´æ–° GameState...
2025-10-05 13:08:34 - [INFO] - [512280345618546699] æŽ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['game_state']
2025-10-05 13:08:34 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-10-05 13:08:35 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–-åŽŸç”Ÿ] é–‹å ´ç™½ç”ŸæˆæˆåŠŸã€‚
2025-10-05 13:08:35 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] æ­£åœ¨å‘ä½¿ç”¨è€…ç§è¨Šç™¼é€æœ€çµ‚é–‹å ´ç™½...
2025-10-05 13:08:35 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸–] é–‹å ´ç™½ç™¼é€å®Œç•¢ã€‚
2025-10-05 13:08:35 - [INFO] - [512280345618546699] å¾Œå°å‰µä¸–æµç¨‹çµæŸï¼Œç‹€æ…‹éŽ–å·²é‡‹æ”¾ã€‚
2025-10-05 13:19:28 - [INFO] - [512280345618546699] å•Ÿå‹• RAG ç›´é€šå°è©±æµç¨‹...
2025-10-05 13:19:28 - [INFO] - [512280345618546699] [Direct RAG] å•Ÿå‹• LORE å„ªå…ˆçš„ RAG ç›´é€šç”Ÿæˆæµç¨‹...
2025-10-05 13:19:28 - [INFO] - [512280345618546699] [LORE æ“´å±•] æ­£åœ¨æª¢æŸ¥æ˜¯å¦éœ€è¦æ“´å±• LORE...
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [LORE æ“´å±•] âœ… æª¢æ¸¬åˆ°æ–°å¯¦é«”éª¨æž¶ï¼Œå•Ÿå‹•ã€è³‡è¨Šå›žå¡«ã€‘æµç¨‹...
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [LORE å›žå¡«] æ­£åœ¨ç‚ºæ–° NPC 'ç±³å©­' æª¢ç´¢èƒŒæ™¯è³‡è¨Š...
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [å®žä½“åç§°æå– (v2.2)] æ­£åœ¨ä»ŽæŸ¥è¯¢ 'é—œæ–¼è§’è‰² 'ç±³å©­' çš„æ‰€æœ‰å·²çŸ¥è³‡è¨Šã€èƒŒæ™¯æ•…äº‹ã€å¤–è²Œã€æ€§æ ¼å’Œèƒ½åŠ›ã€‚...' ä¸­åˆ†æžå®žä½“...
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] æŸ¥è©¢å·²æ“´å±•ç‚º: 'çš„æ‰€æœ‰å·²çŸ¥è³‡è¨Šã€èƒŒæ™¯æ•…äº‹ã€å¤–è²Œã€æ€§æ ¼å’Œèƒ½åŠ›ã€‚ 'ç±³å©­' é—œæ–¼è§’è‰²'
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] ç²—ç•¥æª¢ç´¢æˆåŠŸï¼Œç²å¾— 20 ä»½å€™é¸æ–‡æª”ã€‚
2025-10-05 13:19:29 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] âœ… æˆåŠŸæ‹¼æŽ¥å…¨éƒ¨ 20 æ¢åŽŸå§‹æ–‡æª”ä½œç‚º summary_contextã€‚
2025-10-05 13:19:30 - [WARNING] - [512280345618546699] æ¨¡åž‹ 'gemini-2.5-flash-lite' (Key #0) é­é‡å…§å®¹å¯©æŸ¥æˆ–å®‰å…¨éŒ¯èª¤: BlockedPromptExceptionã€‚
2025-10-05 13:19:30 - [WARNING] - [512280345618546699] å…§éƒ¨éˆæ„å¤–é­é‡å¯©æŸ¥ã€‚å•Ÿå‹•ã€é€šç”¨åŒ–è§£æ§‹-é‡æ§‹ã€‘ç­–ç•¥...
2025-10-05 13:19:30 - [ERROR] - [512280345618546699] (Euphemizer) åœ¨å¤±æ•—çš„ Prompt ä¸­æ‰¾ä¸åˆ°ä»»ä½•å¯ä¾›æ¶ˆæ¯’çš„å·²çŸ¥å…§å®¹æ¨™è¨˜ï¼Œç„¡æ³•åŸ·è¡Œå§”å©‰åŒ–ã€‚
2025-10-05 13:19:30 - [ERROR] - [512280345618546699] ã€é€šç”¨åŒ–è§£æ§‹ã€‘ç­–ç•¥æœ€çµ‚å¤±æ•—: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missingã€‚å°‡è§¸ç™¼å®‰å…¨å‚™æ´ã€‚
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1721, in _euphemize_and_retry
    return None if not output_schema else output_schema()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\main.py", line 193, in __init__
    self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
2025-10-05 13:19:30 - [WARNING] - [512280345618546699] [LORE å›žå¡«] ç‚º 'ç±³å©­' ç²¾ç…‰æ™‚å¤±æ•—: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missingã€‚å°‡åƒ…ä¿å­˜åŸºç¤Žéª¨æž¶ã€‚
2025-10-05 13:19:30 - [INFO] - [512280345618546699] [LORE å›žå¡«] æ­£åœ¨ç‚ºæ–° NPC 'å‹›çˆµ' æª¢ç´¢èƒŒæ™¯è³‡è¨Š...
2025-10-05 13:19:30 - [INFO] - [512280345618546699] [å®žä½“åç§°æå– (v2.2)] æ­£åœ¨ä»ŽæŸ¥è¯¢ 'é—œæ–¼è§’è‰² 'å‹›çˆµ' çš„æ‰€æœ‰å·²çŸ¥è³‡è¨Šã€èƒŒæ™¯æ•…äº‹ã€å¤–è²Œã€æ€§æ ¼å’Œèƒ½åŠ›ã€‚...' ä¸­åˆ†æžå®žä½“...
2025-10-05 13:19:30 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] æŸ¥è©¢å·²æ“´å±•ç‚º: 'çš„æ‰€æœ‰å·²çŸ¥è³‡è¨Šã€èƒŒæ™¯æ•…äº‹ã€å¤–è²Œã€æ€§æ ¼å’Œèƒ½åŠ›ã€‚ 'å‹›çˆµ' é—œæ–¼è§’è‰²'
2025-10-05 13:19:30 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] ç²—ç•¥æª¢ç´¢æˆåŠŸï¼Œç²å¾— 20 ä»½å€™é¸æ–‡æª”ã€‚
2025-10-05 13:19:30 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] âœ… æˆåŠŸæ‹¼æŽ¥å…¨éƒ¨ 20 æ¢åŽŸå§‹æ–‡æª”ä½œç‚º summary_contextã€‚
2025-10-05 13:19:31 - [WARNING] - [512280345618546699] æ¨¡åž‹ 'gemini-2.5-flash-lite' (Key #0) é­é‡å…§å®¹å¯©æŸ¥æˆ–å®‰å…¨éŒ¯èª¤: BlockedPromptExceptionã€‚
2025-10-05 13:19:31 - [WARNING] - [512280345618546699] å…§éƒ¨éˆæ„å¤–é­é‡å¯©æŸ¥ã€‚å•Ÿå‹•ã€é€šç”¨åŒ–è§£æ§‹-é‡æ§‹ã€‘ç­–ç•¥...
2025-10-05 13:19:31 - [ERROR] - [512280345618546699] (Euphemizer) åœ¨å¤±æ•—çš„ Prompt ä¸­æ‰¾ä¸åˆ°ä»»ä½•å¯ä¾›æ¶ˆæ¯’çš„å·²çŸ¥å…§å®¹æ¨™è¨˜ï¼Œç„¡æ³•åŸ·è¡Œå§”å©‰åŒ–ã€‚
2025-10-05 13:19:31 - [ERROR] - [512280345618546699] ã€é€šç”¨åŒ–è§£æ§‹ã€‘ç­–ç•¥æœ€çµ‚å¤±æ•—: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missingã€‚å°‡è§¸ç™¼å®‰å…¨å‚™æ´ã€‚
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1721, in _euphemize_and_retry
    return None if not output_schema else output_schema()
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\main.py", line 193, in __init__
    self.__pydantic_validator__.validate_python(data, self_instance=self)
pydantic_core._pydantic_core.ValidationError: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
2025-10-05 13:19:31 - [WARNING] - [512280345618546699] [LORE å›žå¡«] ç‚º 'å‹›çˆµ' ç²¾ç…‰æ™‚å¤±æ•—: 1 validation error for CharacterProfile
name
  Field required [type=missing, input_value={}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missingã€‚å°‡åƒ…ä¿å­˜åŸºç¤Žéª¨æž¶ã€‚
2025-10-05 13:19:31 - [INFO] - [512280345618546699] (_resolve_and_save) æ­£åœ¨ç‚º 'npc_profile' é¡žåˆ¥è™•ç† 2 å€‹å¯¦é«”...
2025-10-05 13:19:41 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #0.
2025-10-05 13:19:42 - [INFO] - [512280345618546699] (_resolve_and_save) æ­£åœ¨ç‚º 'location_info' é¡žåˆ¥è™•ç† 1 å€‹å¯¦é«”...
2025-10-05 13:19:42 - [INFO] - [512280345618546699] [LORE æ“´å±•] æ–°çš„ LORE (åŒ…å«å·²å›žå¡«è³‡è¨Š) å·²æˆåŠŸå‰µå»ºä¸¦å­˜å…¥è³‡æ–™åº«ã€‚
2025-10-05 13:19:42 - [INFO] - [512280345618546699] [æŸ¥è©¢æ“´å±•] æ­£åœ¨æ•´åˆçŸ­æœŸè¨˜æ†¶ä»¥æ„ŸçŸ¥å ´æ™¯ä¸Šä¸‹æ–‡...
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [é›™å¼•æ“Žå¯¦é«”æå–] æˆåŠŸæå–é«˜è³ªé‡å¯¦é«”: {'è¼•è¼•', 'å¾ŒèŠ±åœ’'}
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [è¼¸å…¥åˆ†æž-L1] æ­£åœ¨å˜—è©¦ä½¿ç”¨ LLM é€²è¡Œèªžç¾©åˆ†æž...
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [è¼¸å…¥åˆ†æž-L1] âœ… LLM åˆ†æžæˆåŠŸã€‚æå–å¯¦é«”: ['ç±³å©­', 'å®…é‚¸', 'å‹›çˆµ']
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [æŸ¥è©¢æ“´å±•] æª¢æ¸¬åˆ°ç‚ºæœ¬åœ°å ´æ™¯ï¼Œæ­£åœ¨å°‡ä¸»è§’æ·»åŠ è‡³æ ¸å¿ƒå¯¦é«”åˆ—è¡¨ã€‚
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [æŸ¥è©¢æ“´å±•] å ´æ™¯æ„ŸçŸ¥å®Œæˆï¼Œæœ€çµ‚æ ¸å¿ƒå¯¦é«”: ['DINO', 'å¾ŒèŠ±åœ’', 'ç±³å©­', 'å®…é‚¸', 'è¼•è¼•', 'å‹›çˆµ', 'ç¢§']
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [LORE å„ªå…ˆ] å·²æˆåŠŸæ³¨å…¥ 2 æ¢çµ•å°äº‹å¯¦ã€‚
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [å®žä½“åç§°æå– (v2.2)] æ­£åœ¨ä»ŽæŸ¥è¯¢ 'æè¿°ç±³å©­åœ¨å®…é‚¸é‡åˆ°å‹›çˆµ DINO å¾ŒèŠ±åœ’ ç±³å©­ å®…é‚¸ è¼•è¼• å‹›çˆµ ç¢§...' ä¸­åˆ†æžå®žä½“...
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] æŸ¥è©¢å·²æ“´å±•ç‚º: 'æè¿°ç±³å©­åœ¨å®…é‚¸é‡åˆ°å‹›çˆµ DINO å¾ŒèŠ±åœ’ ç±³å©­ å®…é‚¸ è¼•è¼• å‹›çˆµ ç¢§'
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] ç²—ç•¥æª¢ç´¢æˆåŠŸï¼Œç²å¾— 20 ä»½å€™é¸æ–‡æª”ã€‚
2025-10-05 13:19:43 - [INFO] - [512280345618546699] [RAG åŽŸæ–‡ç›´é€š] âœ… æˆåŠŸæ‹¼æŽ¥å…¨éƒ¨ 20 æ¢åŽŸå§‹æ–‡æª”ä½œç‚º summary_contextã€‚
2025-10-05 13:19:46 - [WARNING] - [512280345618546699] æ¨¡åž‹ 'gemini-2.5-flash-lite' (Key #0) é­é‡éœé»˜å¤±æ•—ï¼Œç”Ÿæˆå›  '8' è€Œæå‰çµ‚æ­¢ã€‚
2025-10-05 13:19:46 - [WARNING] - [512280345618546699] æ¨¡åž‹ 'gemini-2.5-flash-lite' (Key #0) é­é‡å…§å®¹å¯©æŸ¥æˆ–å®‰å…¨éŒ¯èª¤: BlockedPromptExceptionã€‚
2025-10-05 13:19:46 - [WARNING] - [512280345618546699] å…§éƒ¨éˆæ„å¤–é­é‡å¯©æŸ¥ã€‚å•Ÿå‹•ã€é€šç”¨åŒ–è§£æ§‹-é‡æ§‹ã€‘ç­–ç•¥...
2025-10-05 13:19:46 - [INFO] - [512280345618546699] (Euphemizer) å·²æå–ç”¨æ–¼é‡æ§‹çš„é—œéµè©ž: ['ç¢§', 'DINO', 'ä¸»äºº']
2025-10-05 13:19:47 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:19:47 - [INFO] - [512280345618546699] (Euphemizer) å·²ç”Ÿæˆæ·¨åŒ–å¾Œçš„ Promptï¼Œæ­£åœ¨é€²è¡Œæœ€çµ‚å˜—è©¦...
2025-10-05 13:20:08 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #0.
2025-10-05 13:20:42 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-pro' with API Key #0.
2025-10-05 13:20:43 - [INFO] - [512280345618546699] RAG ç›´é€šæµç¨‹åŸ·è¡Œå®Œç•¢ï¼Œå›žæ‡‰å·²ç™¼é€ã€‚äº‹å¾Œå­¸ç¿’ä»»å‹™å·²åœ¨èƒŒæ™¯å•Ÿå‹•ã€‚
2025-10-05 13:20:45 - [INFO] - [512280345618546699] [äº‹å¾Œåˆ†æž] æ­£åœ¨å•Ÿå‹•èƒŒæ™¯åˆ†æžèˆ‡åˆ†æµä»»å‹™...
2025-10-05 13:20:47 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:20:47 - [WARNING] - [512280345618546699] æ¨¡åž‹ 'gemini-2.5-flash-lite' (Key #0) é­é‡è§£æžæˆ–é©—è­‰éŒ¯èª¤: ValidationErrorã€‚å•Ÿå‹•ã€è‡ªæˆ‘ä¿®æ­£ã€‘æµç¨‹...
2025-10-05 13:20:47 - [WARNING] - [512280345618546699] å°Žè‡´è§£æžéŒ¯èª¤çš„åŽŸå§‹ LLM è¼¸å‡º: 
--- START RAW ---
```json
{
  "memory_summary": "åœ¨ç¶­åˆ©çˆ¾æ–¯å®…é‚¸çš„èµ°å»Šè£¡ï¼Œåƒ•äººç±³å©­åœ¨æ“¦æ‹­ç›”ç”²æ™‚ï¼Œå‹›çˆµå¡çˆ¾Â·ç¶­åˆ©çˆ¾æ–¯å‡ºç¾ã€‚ç±³å©­æŒ‰ç…§è¦çŸ©æ’©èµ·è£™å­ï¼Œæš´éœ²ä¸‹é«”ï¼Œä¸¦ä¸»å‹•æ’é–‹é›™è…¿ï¼Œéœ²å‡ºè‚‰ç©´å’Œé™°è’‚ã€‚å¥¹å‘å‹›çˆµä¹žæ±‚å¹¹å¥¹ã€‚å‹›çˆµå½Žè…°ï¼Œæä½ç±³å©­æ›¾è¢«æ–¬æ–·åˆé‡ç”Ÿçš„å³æ‰‹ï¼Œè©¢å•å¥¹æ˜¯å¦é‚„è¨˜å¾—ç—›è‹¦ã€‚ç±³å©­ç‹‚ç†±åœ°å›žç­”ï¼Œåªè¨˜å¾—å‹›çˆµçš„è‚‰æ£’å°‡ç—›è‹¦è®Šæˆäº†å¿«æ¨‚ï¼Œä¸¦è«‹æ±‚å‹›çˆµå†æ¬¡ç”¨ç—›è‹¦æ©è³œå¥¹ã€‚",
  "lore_updates": [
    {
      "operation": "create_new_npc_profile",
      "lore_key": "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’ > å®…é‚¸ > ç±³å©­",
      "profile": {
        "name": "ç±³å©­",
        "description": "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’çš„åƒ•äººï¼Œå°å‹›çˆµæ¥µåº¦å´‡æ‹œï¼Œæ›¾è¢«æ–¬æ–·å³æ‰‹å¾Œåˆè¢«å‹›çˆµã€Œé‡ç”Ÿã€ï¼Œå› æ­¤å°å‹›çˆµçš„æ©è³œï¼ˆåŒ…æ‹¬ç—›è‹¦ï¼‰æœ‰è‘—ç‹‚ç†±çš„æ¸´æœ›å’Œç¨ç‰¹çš„ç”Ÿç†åæ‡‰ã€‚",
        "gender": "female",
        "aliases": [
          "æ¯ç•œ"
        ]
      }
    },
    {
      "operation": "create_new_npc_profile",
      "lore_key": "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’ > å®…é‚¸ > å‹›çˆµ",
      "profile": {
        "name": "å¡çˆ¾Â·ç¶­åˆ©çˆ¾æ–¯",
        "description": "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’çš„ä¸»äººï¼Œå°åƒ•äººç±³å©­é€²è¡Œå¿ƒç†å’Œç”Ÿç†çš„é›™é‡æŽŒæŽ§ï¼Œæ“…é•·åˆ©ç”¨å…¶éŽåŽ»çš„å‰µå‚·å’Œå°ä»–çš„å´‡æ‹œä¾†é€²è¡Œæ“æŽ§ã€‚ä»–çš„è²éŸ³å……æ»¿å¨åš´ï¼Œè¡Œç‚ºå†·éœè€Œç´°ç·»ã€‚",
        "gender": "male",
        "aliases": [
          "ä¸»äºº"
        ]
      }
    },
    {
      "operation": "update_location_info",
      "lore_key": "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’ > å®…é‚¸",
      "update": {
        "description": "å®…é‚¸å…§æœ‰æ¼«é•·è€Œå¯‚éœçš„èµ°å»Šï¼Œé™½å…‰é€éŽå½©ç¹ªçŽ»ç’ƒçª—ç‘ä¸‹æ–‘é§å…‰å½±ï¼Œç‰†å£æŽ›æœ‰æ­·ä»£ç¥–å…ˆè‚–åƒã€‚åœ°æ¿ç‚ºå†°å†·å¤§ç†çŸ³ã€‚ç±³å©­åœ¨æ­¤æ“¦æ‹­å¤è€çš„é¨Žå£«ç›”ç”²ã€‚"
      }
    },
    {
      "operation": "update_lore_template_keys",
      "update": {
        "new_lore_template_keys": [
          "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’ > å®…é‚¸ > ç±³å©­",
          "ç¶­åˆ©çˆ¾æ–¯èŽŠåœ’ > å®…é‚¸ > å‹›çˆµ"
        ]
      }
    }
  ]
}
```
--- END RAW ---
2025-10-05 13:20:49 - [INFO] - [512280345618546699] [LLM Success] Generation successful using model 'gemini-2.5-flash-lite' with API Key #0.
2025-10-05 13:20:49 - [INFO] - [512280345618546699] [è‡ªæˆ‘ä¿®æ­£] âœ… ä¿®æ­£æµç¨‹æˆåŠŸï¼Œæ­£åœ¨é‡æ–°é©—è­‰...
2025-10-05 13:20:49 - [ERROR] - [512280345618546699] [è‡ªæˆ‘ä¿®æ­£] ðŸ”¥ è‡ªæˆ‘ä¿®æ­£æµç¨‹æœ€çµ‚å¤±æ•—: 8 validation errors for PostGenerationAnalysisResult
lore_updates.0.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.0.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.tool_name
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.parameters
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.tool_name
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.parameters
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1542, in ainvoke_with_rotation
    return output_schema.model_validate(json.loads(corrected_clean_json_str))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\main.py", line 568, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 8 validation errors for PostGenerationAnalysisResult
lore_updates.0.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.0.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.tool_name
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.parameters
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.tool_name
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.parameters
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
2025-10-05 13:20:49 - [ERROR] - [512280345618546699] [äº‹å¾Œåˆ†æž] ä»»å‹™ä¸»é«”ç™¼ç”Ÿæœªé æœŸçš„ç•°å¸¸: 8 validation errors for PostGenerationAnalysisResult
lore_updates.0.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.0.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.tool_name
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.parameters
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.tool_name
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.parameters
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2128, in _background_lore_extraction
    analysis_result = await self.ainvoke_with_rotation(
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1546, in ainvoke_with_rotation
    raise e
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1494, in ainvoke_with_rotation
    return output_schema.model_validate(json.loads(repaired_str))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\main.py", line 568, in model_validate
    return cls.__pydantic_validator__.validate_python(
pydantic_core._pydantic_core.ValidationError: 8 validation errors for PostGenerationAnalysisResult
lore_updates.0.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.0.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['æ¯ç•œ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.tool_name
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.1.parameters
  Field required [type=missing, input_value={'operation': 'create_new... 'aliases': ['ä¸»äºº']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.tool_name
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.2.parameters
  Field required [type=missing, input_value={'operation': 'update_loc...è€çš„é¨Žå£«ç›”ç”²ã€‚'}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.tool_name
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
lore_updates.3.parameters
  Field required [type=missing, input_value={'operation': 'update_lor... > å®…é‚¸ > å‹›çˆµ']}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.8/v/missing
