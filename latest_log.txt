### AI Lover Log - Last updated at 2025-10-01T21:34:48.871642 ###

Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1231, in ainvoke_with_rotation
    structured_llm = llm.with_structured_output(output_schema)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1194, in with_structured_output
    llm = self.bind_tools([schema], tool_choice=tool_choice)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1232, in bind_tools
    genai_tools = [tool_to_dict(convert_to_genai_function_declarations(tools))]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 178, in convert_to_genai_function_declarations
    fd = _format_to_gapic_function_declaration(tool)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 215, in _format_to_gapic_function_declaration
    return _format_base_tool_to_function_declaration(callable_as_lc_tool()(tool))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 220, in _partial
    return _make_with_name(func.__name__)(func)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 176, in _make_tool
    return StructuredTool.from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\structured.py", line 163, in from_function
    args_schema = create_schema_from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 218, in create_schema_from_function
    valid_properties = _get_filtered_args(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 95, in _get_filtered_args
    schema = inferred_model.schema()["properties"]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\main.py", line 664, in schema
    s = model_schema(cls, by_alias=by_alias, ref_template=ref_template)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 188, in model_schema
    m_schema, m_definitions, nested_models = model_process_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 581, in model_process_schema
    m_schema, m_definitions, nested_models = model_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 622, in model_type_schema
    f_schema, f_definitions, f_nested_models = field_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 255, in field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 462, in field_type_schema
    items_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 852, in field_singleton_schema
    return field_singleton_sub_fields_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 701, in field_singleton_sub_fields_schema
    return field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 527, in field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 951, in field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')
ValueError: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] åœ¨ ainvoke_with_rotation æœŸé–“ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ (æ¨¡å‹: gemini-2.5-flash-lite): Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1231, in ainvoke_with_rotation
    structured_llm = llm.with_structured_output(output_schema)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1194, in with_structured_output
    llm = self.bind_tools([schema], tool_choice=tool_choice)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1232, in bind_tools
    genai_tools = [tool_to_dict(convert_to_genai_function_declarations(tools))]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 178, in convert_to_genai_function_declarations
    fd = _format_to_gapic_function_declaration(tool)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 215, in _format_to_gapic_function_declaration
    return _format_base_tool_to_function_declaration(callable_as_lc_tool()(tool))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 220, in _partial
    return _make_with_name(func.__name__)(func)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 176, in _make_tool
    return StructuredTool.from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\structured.py", line 163, in from_function
    args_schema = create_schema_from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 218, in create_schema_from_function
    valid_properties = _get_filtered_args(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 95, in _get_filtered_args
    schema = inferred_model.schema()["properties"]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\main.py", line 664, in schema
    s = model_schema(cls, by_alias=by_alias, ref_template=ref_template)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 188, in model_schema
    m_schema, m_definitions, nested_models = model_process_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 581, in model_process_schema
    m_schema, m_definitions, nested_models = model_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 622, in model_type_schema
    f_schema, f_definitions, f_nested_models = field_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 255, in field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 462, in field_type_schema
    items_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 852, in field_singleton_schema
    return field_singleton_sub_fields_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 701, in field_singleton_sub_fields_schema
    return field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 527, in field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 951, in field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')
ValueError: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] åœ¨ ainvoke_with_rotation æœŸé–“ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ (æ¨¡å‹: gemini-2.5-flash-lite): Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1231, in ainvoke_with_rotation
    structured_llm = llm.with_structured_output(output_schema)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1194, in with_structured_output
    llm = self.bind_tools([schema], tool_choice=tool_choice)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1232, in bind_tools
    genai_tools = [tool_to_dict(convert_to_genai_function_declarations(tools))]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 178, in convert_to_genai_function_declarations
    fd = _format_to_gapic_function_declaration(tool)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 215, in _format_to_gapic_function_declaration
    return _format_base_tool_to_function_declaration(callable_as_lc_tool()(tool))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 220, in _partial
    return _make_with_name(func.__name__)(func)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 176, in _make_tool
    return StructuredTool.from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\structured.py", line 163, in from_function
    args_schema = create_schema_from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 218, in create_schema_from_function
    valid_properties = _get_filtered_args(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 95, in _get_filtered_args
    schema = inferred_model.schema()["properties"]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\main.py", line 664, in schema
    s = model_schema(cls, by_alias=by_alias, ref_template=ref_template)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 188, in model_schema
    m_schema, m_definitions, nested_models = model_process_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 581, in model_process_schema
    m_schema, m_definitions, nested_models = model_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 622, in model_type_schema
    f_schema, f_definitions, f_nested_models = field_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 255, in field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 462, in field_type_schema
    items_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 852, in field_singleton_schema
    return field_singleton_sub_fields_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 701, in field_singleton_sub_fields_schema
    return field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 527, in field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 951, in field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')
ValueError: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] åœ¨ ainvoke_with_rotation æœŸé–“ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ (æ¨¡å‹: gemini-2.5-flash-lite): Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1231, in ainvoke_with_rotation
    structured_llm = llm.with_structured_output(output_schema)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1194, in with_structured_output
    llm = self.bind_tools([schema], tool_choice=tool_choice)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1232, in bind_tools
    genai_tools = [tool_to_dict(convert_to_genai_function_declarations(tools))]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 178, in convert_to_genai_function_declarations
    fd = _format_to_gapic_function_declaration(tool)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 215, in _format_to_gapic_function_declaration
    return _format_base_tool_to_function_declaration(callable_as_lc_tool()(tool))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 220, in _partial
    return _make_with_name(func.__name__)(func)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 176, in _make_tool
    return StructuredTool.from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\structured.py", line 163, in from_function
    args_schema = create_schema_from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 218, in create_schema_from_function
    valid_properties = _get_filtered_args(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 95, in _get_filtered_args
    schema = inferred_model.schema()["properties"]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\main.py", line 664, in schema
    s = model_schema(cls, by_alias=by_alias, ref_template=ref_template)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 188, in model_schema
    m_schema, m_definitions, nested_models = model_process_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 581, in model_process_schema
    m_schema, m_definitions, nested_models = model_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 622, in model_type_schema
    f_schema, f_definitions, f_nested_models = field_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 255, in field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 462, in field_type_schema
    items_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 852, in field_singleton_schema
    return field_singleton_sub_fields_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 701, in field_singleton_sub_fields_schema
    return field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 527, in field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 951, in field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')
ValueError: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] åœ¨ ainvoke_with_rotation æœŸé–“ç™¼ç”ŸæœªçŸ¥éŒ¯èª¤ (æ¨¡å‹: gemini-2.5-flash-lite): Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1231, in ainvoke_with_rotation
    structured_llm = llm.with_structured_output(output_schema)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1194, in with_structured_output
    llm = self.bind_tools([schema], tool_choice=tool_choice)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1232, in bind_tools
    genai_tools = [tool_to_dict(convert_to_genai_function_declarations(tools))]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 178, in convert_to_genai_function_declarations
    fd = _format_to_gapic_function_declaration(tool)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 215, in _format_to_gapic_function_declaration
    return _format_base_tool_to_function_declaration(callable_as_lc_tool()(tool))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 220, in _partial
    return _make_with_name(func.__name__)(func)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 176, in _make_tool
    return StructuredTool.from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\structured.py", line 163, in from_function
    args_schema = create_schema_from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 218, in create_schema_from_function
    valid_properties = _get_filtered_args(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 95, in _get_filtered_args
    schema = inferred_model.schema()["properties"]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\main.py", line 664, in schema
    s = model_schema(cls, by_alias=by_alias, ref_template=ref_template)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 188, in model_schema
    m_schema, m_definitions, nested_models = model_process_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 581, in model_process_schema
    m_schema, m_definitions, nested_models = model_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 622, in model_type_schema
    f_schema, f_definitions, f_nested_models = field_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 255, in field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 462, in field_type_schema
    items_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 852, in field_singleton_schema
    return field_singleton_sub_fields_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 701, in field_singleton_sub_fields_schema
    return field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 527, in field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 951, in field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')
ValueError: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] [Final Failure] æ‰€æœ‰æ¨¡å‹å’Œé‡‘é‘°å‡æœ€çµ‚å¤±æ•—ã€‚æœ€å¾Œçš„éŒ¯èª¤æ˜¯: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] [LORE è§£æ 2/4] ğŸ”¥ å¯¦é«”åˆ†é¡æ­¥é©Ÿå¤±æ•—: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=Trueï¼Œæµç¨‹çµ‚æ­¢ã€‚
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 4404, in _execute_lore_parsing_pipeline
    classification_result = await self.ainvoke_with_rotation(
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1279, in ainvoke_with_rotation
    raise last_exception if last_exception else Exception("ainvoke_with_rotation failed without a specific exception.")
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 1231, in ainvoke_with_rotation
    structured_llm = llm.with_structured_output(output_schema)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1194, in with_structured_output
    llm = self.bind_tools([schema], tool_choice=tool_choice)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\chat_models.py", line 1232, in bind_tools
    genai_tools = [tool_to_dict(convert_to_genai_function_declarations(tools))]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 178, in convert_to_genai_function_declarations
    fd = _format_to_gapic_function_declaration(tool)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_google_genai\_function_utils.py", line 215, in _format_to_gapic_function_declaration
    return _format_base_tool_to_function_declaration(callable_as_lc_tool()(tool))
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 220, in _partial
    return _make_with_name(func.__name__)(func)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\convert.py", line 176, in _make_tool
    return StructuredTool.from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\structured.py", line 163, in from_function
    args_schema = create_schema_from_function(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 218, in create_schema_from_function
    valid_properties = _get_filtered_args(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\langchain_core\tools\base.py", line 95, in _get_filtered_args
    schema = inferred_model.schema()["properties"]
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\main.py", line 664, in schema
    s = model_schema(cls, by_alias=by_alias, ref_template=ref_template)
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 188, in model_schema
    m_schema, m_definitions, nested_models = model_process_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 581, in model_process_schema
    m_schema, m_definitions, nested_models = model_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 622, in model_type_schema
    f_schema, f_definitions, f_nested_models = field_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 255, in field_schema
    f_schema, f_definitions, f_nested_models = field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 462, in field_type_schema
    items_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 852, in field_singleton_schema
    return field_singleton_sub_fields_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 701, in field_singleton_sub_fields_schema
    return field_type_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 527, in field_type_schema
    f_schema, f_definitions, f_nested_models = field_singleton_schema(
  File "C:\Users\USER\AppData\Local\Programs\Python\Python310\lib\site-packages\pydantic\v1\schema.py", line 951, in field_singleton_schema
    raise ValueError(f'Value not declarable with JSON Schema, field: {field}')
ValueError: Value not declarable with JSON Schema, field: name='_classifications' type=LoreClassificationResult required=True
2025-10-01 16:51:43 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 1/3] LORE è§£æç®¡ç·šåŸ·è¡Œå®Œç•¢ã€‚
2025-10-01 16:51:43 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 2/3] æ­£åœ¨å°‡è§£æå‡ºçš„ LORE çµæœæŒä¹…åŒ–åˆ°è³‡æ–™åº«...
2025-10-01 16:51:43 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 2/3] LORE æŒä¹…åŒ–å®Œæˆã€‚
2025-10-01 16:51:43 - [INFO] - [512280345618546699] [å¾Œå°å‰µä¸– 3/3] æ­£åœ¨è£œå®Œè§’è‰²æª”æ¡ˆã€ç”Ÿæˆä¸–ç•Œä¸¦å‰µä½œé–‹å ´ç™½...
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] [/start] ç‚ºè§’è‰² 'DINO' é€²è¡Œå®‰å…¨è£œå®Œæ™‚ç™¼ç”ŸéŒ¯èª¤: AILover.ainvoke_with_rotation() missing 1 required positional argument: 'prompt_params'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2332, in _safe_complete_profile
    completed_safe_profile = await self.ainvoke_with_rotation(
TypeError: AILover.ainvoke_with_rotation() missing 1 required positional argument: 'prompt_params'
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] [/start] ç‚ºè§’è‰² 'ç¢§' é€²è¡Œå®‰å…¨è£œå®Œæ™‚ç™¼ç”ŸéŒ¯èª¤: AILover.ainvoke_with_rotation() missing 1 required positional argument: 'prompt_params'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2332, in _safe_complete_profile
    completed_safe_profile = await self.ainvoke_with_rotation(
TypeError: AILover.ainvoke_with_rotation() missing 1 required positional argument: 'prompt_params'
2025-10-01 16:51:43 - [INFO] - [512280345618546699] æ¥æ”¶åˆ° profile æ›´æ–°è«‹æ±‚: ['user_profile', 'ai_profile']
2025-10-01 16:51:43 - [INFO] - [512280345618546699] Profile æ›´æ–°ä¸¦æŒä¹…åŒ–æˆåŠŸã€‚
2025-10-01 16:51:43 - [ERROR] - [512280345618546699] å¾Œå°å‰µä¸–æµç¨‹ç™¼ç”Ÿåš´é‡éŒ¯èª¤: AILover.ainvoke_with_rotation() missing 1 required positional argument: 'prompt_params'
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1165, in _perform_full_setup_flow
    await ai_instance.generate_world_genesis(canon_text=canon_text)
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\ai_core.py", line 2396, in generate_world_genesis
    genesis_result = await self.ainvoke_with_rotation(
TypeError: AILover.ainvoke_with_rotation() missing 1 required positional argument: 'prompt_params'
2025-10-01 16:51:43 - [INFO] - [512280345618546699] å¾Œå°å‰µä¸–æµç¨‹çµæŸï¼Œç‹€æ…‹é–å·²é‡‹æ”¾ã€‚
2025-10-01 16:59:04 - [INFO] - æ‰€æœ‰æŒä¹…åŒ– UI è¦–åœ–å·²æˆåŠŸè¨»å†Šã€‚
2025-10-01 16:59:04 - [INFO] - æ­£åœ¨å˜—è©¦å°‡æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤ (Slash Commands) å…¨åŸŸåŒæ­¥åˆ° Discord...
2025-10-01 16:59:05 - [INFO] - âœ… æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤å…¨åŸŸåŒæ­¥æˆåŠŸï¼(æ³¨æ„ï¼šå…¨åŸŸæŒ‡ä»¤æ›´æ–°å¯èƒ½éœ€è¦é•·é”ä¸€å°æ™‚æ‰èƒ½åœ¨æ‰€æœ‰ä¼ºæœå™¨ç”Ÿæ•ˆ)
2025-10-01 16:59:05 - [INFO] - Discord Bot is ready!
2025-10-01 16:59:08 - [INFO] - ã€å¥åº·æª¢æŸ¥ & Keep-Aliveã€‘èƒŒæ™¯ä»»å‹™å·²å•Ÿå‹•ã€‚
2025-10-01 16:59:08 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-10-01 16:59:08 - [INFO] - å·²æˆåŠŸç™¼é€å•Ÿå‹•æˆåŠŸé€šçŸ¥çµ¦ç®¡ç†å“¡ã€‚
2025-10-01 21:34:34 - [INFO] - æ‰€æœ‰æŒä¹…åŒ– UI è¦–åœ–å·²æˆåŠŸè¨»å†Šã€‚
2025-10-01 21:34:34 - [INFO] - æ­£åœ¨å˜—è©¦å°‡æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤ (Slash Commands) å…¨åŸŸåŒæ­¥åˆ° Discord...
2025-10-01 21:34:35 - [INFO] - âœ… æ‡‰ç”¨ç¨‹å¼æŒ‡ä»¤å…¨åŸŸåŒæ­¥æˆåŠŸï¼(æ³¨æ„ï¼šå…¨åŸŸæŒ‡ä»¤æ›´æ–°å¯èƒ½éœ€è¦é•·é”ä¸€å°æ™‚æ‰èƒ½åœ¨æ‰€æœ‰ä¼ºæœå™¨ç”Ÿæ•ˆ)
2025-10-01 21:34:35 - [INFO] - Discord Bot is ready!
2025-10-01 21:34:38 - [INFO] - ã€å¥åº·æª¢æŸ¥ & Keep-Aliveã€‘èƒŒæ™¯ä»»å‹™å·²å•Ÿå‹•ã€‚
2025-10-01 21:34:38 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-10-01 21:34:38 - [INFO] - å·²æˆåŠŸç™¼é€å•Ÿå‹•æˆåŠŸé€šçŸ¥çµ¦ç®¡ç†å“¡ã€‚
