### AI Lover Log - Last updated at 2025-09-23T00:24:51.022551 ###

2025-09-23 00:04:17 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 57 條文檔用於構建 BM25。
2025-09-23 00:04:17 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-23 00:04:17 - [INFO] - [512280345618546699] 所有構建鏈的前置資源已準備就緒。
2025-09-23 00:04:17 - [INFO] - 為使用者 512280345618546699 成功創建並初始化 AI 實例。
2025-09-23 00:04:17 - [INFO] - [512280345618546699] 正在從資料庫恢復短期場景記憶...
2025-09-23 00:04:17 - [INFO] - [512280345618546699] 成功恢復了 1 個場景的對話歷史，總計 1 條訊息。
2025-09-23 00:04:18 - [INFO] - [512280345618546699] 核心數據模板 'world_snapshot_template.txt' 已成功加載。
2025-09-23 00:04:18 - [INFO] - [512280345618546699] 核心協議 '00_supreme_directive.txt' 已成功加載。
2025-09-23 00:04:18 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 57 條文檔用於構建 BM25。
2025-09-23 00:04:18 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-23 00:04:18 - [INFO] - [512280345618546699] 所有構建鏈的前置資源已準備就緒。
2025-09-23 00:04:18 - [INFO] - [512280345618546699] (Canon Processor) 已从 SQL 记忆库中清理了 33 条旧 'canon' 记录。
2025-09-23 00:04:19 - [INFO] - [512280345618546699] (Canon Processor) 所有 33 个世界圣经文本块均已成功处理并存入 SQL 记忆库。
2025-09-23 00:04:19 - [ERROR] - [512280345618546699] 背景處理世界聖經時發生錯誤: AILover.parse_and_create_lore_from_canon() takes 2 positional arguments but 4 were given
Traceback (most recent call last):
  File "D:\DINO\SD\ComfyUI\personal_server\ai_lover_service\src\discord_bot.py", line 1161, in _background_process_canon
    await ai_instance.parse_and_create_lore_from_canon(interaction, content_text, is_setup_flow)
TypeError: AILover.parse_and_create_lore_from_canon() takes 2 positional arguments but 4 were given
2025-09-23 00:13:54 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-23 00:13:54 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-23 00:13:55 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-23 00:13:55 - [INFO] - Discord Bot is ready!
2025-09-23 00:13:57 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-23 00:13:57 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-23 00:13:58 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-23 00:15:30 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-23 00:15:30 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-23 00:15:30 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-23 00:15:30 - [INFO] - Discord Bot is ready!
2025-09-23 00:15:33 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-23 00:15:33 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-23 00:15:33 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-23 00:19:34 - [INFO] - 所有持久化 UI 視圖已成功註冊。
2025-09-23 00:19:34 - [INFO] - 正在嘗試將應用程式指令 (Slash Commands) 全域同步到 Discord...
2025-09-23 00:19:35 - [INFO] - ✅ 應用程式指令全域同步成功！(注意：全域指令更新可能需要長達一小時才能在所有伺服器生效)
2025-09-23 00:19:35 - [INFO] - Discord Bot is ready!
2025-09-23 00:19:37 - [INFO] - 【健康檢查 & Keep-Alive】背景任務已啟動。
2025-09-23 00:19:37 - [INFO] - Logged in as AI#4450 (ID: 1358417100250808531)
2025-09-23 00:19:38 - [INFO] - 已成功發送啟動成功通知給管理員。
2025-09-23 00:20:20 - [INFO] - 使用者 512280345618546699 沒有活躍的 AI 實例，嘗試創建...
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 核心數據模板 'world_snapshot_template.txt' 已成功加載。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 核心協議 '00_supreme_directive.txt' 已成功加載。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 57 條文檔用於構建 BM25。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 所有構建鏈的前置資源已準備就緒。
2025-09-23 00:20:20 - [INFO] - 為使用者 512280345618546699 成功創建並初始化 AI 實例。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 正在從資料庫恢復短期場景記憶...
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 成功恢復了 1 個場景的對話歷史，總計 1 條訊息。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 核心數據模板 'world_snapshot_template.txt' 已成功加載。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 核心協議 '00_supreme_directive.txt' 已成功加載。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] (Retriever Builder) 已從 SQL 和 LORE 加載 57 條文檔用於構建 BM25。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] (Retriever Builder) 純 BM25 檢索器構建成功。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] 所有構建鏈的前置資源已準備就緒。
2025-09-23 00:20:20 - [INFO] - [512280345618546699] (Canon Processor) 已从 SQL 记忆库中清理了 33 条旧 'canon' 记录。
2025-09-23 00:20:21 - [INFO] - [512280345618546699] (Canon Processor) 所有 33 个世界圣经文本块均已成功处理并存入 SQL 记忆库。
2025-09-23 00:20:21 - [INFO] - [512280345618546699] 開始智能解析世界聖經文本 (總長度: 26456)...
2025-09-23 00:20:21 - [INFO] - [512280345618546699] 世界聖經已被分割成 7 個文本塊進行處理...
2025-09-23 00:20:21 - [INFO] - [512280345618546699] 正在處理文本塊 1/7...
2025-09-23 00:20:38 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'npc_profile' 類別處理 19 個實體...
2025-09-23 00:20:38 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'location_info' 類別處理 3 個實體...
2025-09-23 00:20:38 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'item_info' 類別處理 2 個實體...
2025-09-23 00:20:38 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 16 個實體...
2025-09-23 00:20:42 - [INFO] - [512280345618546699] 文本塊 1 解析並儲存成功。
2025-09-23 00:20:42 - [INFO] - [512280345618546699] 正在處理文本塊 2/7...
2025-09-23 00:20:54 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'npc_profile' 類別處理 21 個實體...
2025-09-23 00:20:54 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'location_info' 類別處理 5 個實體...
2025-09-23 00:20:54 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 9 個實體...
2025-09-23 00:20:57 - [INFO] - [512280345618546699] 文本塊 2 解析並儲存成功。
2025-09-23 00:20:57 - [INFO] - [512280345618546699] 正在處理文本塊 3/7...
2025-09-23 00:21:13 - [WARNING] - [512280345618546699] 處理文本塊 3/7 時發生錯誤 (嘗試 1/2): ValueError: 在結構化數據部分未找到有效的JSON對象。
2025-09-23 00:21:15 - [WARNING] - [512280345618546699] 文本塊 3 首次嘗試失敗，正在注入【零號指令】進行強化重試...
2025-09-23 00:21:24 - [WARNING] - [512280345618546699] 處理文本塊 3/7 時發生錯誤 (嘗試 2/2): ValueError: 在結構化數據部分未找到有效的JSON對象。
2025-09-23 00:21:24 - [ERROR] - [512280345618546699] 文本塊 3/7 在所有重試後最終失敗。
2025-09-23 00:21:24 - [INFO] - [512280345618546699] 正在處理文本塊 4/7...
2025-09-23 00:21:25 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #4) 遭遇內容審查或解析錯誤: BlockedPromptException。
2025-09-23 00:21:25 - [WARNING] - [512280345618546699] 處理文本塊 4/7 時發生錯誤 (嘗試 1/2): BlockedPromptException: Prompt blocked due to PROHIBITED_CONTENT
2025-09-23 00:21:27 - [WARNING] - [512280345618546699] 文本塊 4 首次嘗試失敗，正在注入【零號指令】進行強化重試...
2025-09-23 00:21:56 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'npc_profile' 類別處理 22 個實體...
2025-09-23 00:21:56 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'creature_info' 類別處理 1 個實體...
2025-09-23 00:21:56 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'quest' 類別處理 9 個實體...
2025-09-23 00:21:56 - [INFO] - [512280345618546699] (_resolve_and_save) 正在為 'world_lore' 類別處理 43 個實體...
2025-09-23 00:22:03 - [INFO] - [512280345618546699] 文本塊 4 解析並儲存成功。
2025-09-23 00:22:03 - [INFO] - [512280345618546699] 正在處理文本塊 5/7...
2025-09-23 00:22:16 - [WARNING] - [512280345618546699] 處理文本塊 5/7 時發生錯誤 (嘗試 1/2): ValueError: 在結構化數據部分未找到有效的JSON對象。
2025-09-23 00:22:18 - [WARNING] - [512280345618546699] 文本塊 5 首次嘗試失敗，正在注入【零號指令】進行強化重試...
2025-09-23 00:22:30 - [WARNING] - [512280345618546699] 處理文本塊 5/7 時發生錯誤 (嘗試 2/2): ValueError: 在結構化數據部分未找到有效的JSON對象。
2025-09-23 00:22:30 - [ERROR] - [512280345618546699] 文本塊 5/7 在所有重試後最終失敗。
2025-09-23 00:22:30 - [INFO] - [512280345618546699] 正在處理文本塊 6/7...
2025-09-23 00:22:46 - [WARNING] - [512280345618546699] 處理文本塊 6/7 時發生錯誤 (嘗試 1/2): ValueError: 在結構化數據部分未找到有效的JSON對象。
2025-09-23 00:22:48 - [WARNING] - [512280345618546699] 文本塊 6 首次嘗試失敗，正在注入【零號指令】進行強化重試...
2025-09-23 00:22:58 - [WARNING] - [512280345618546699] 處理文本塊 6/7 時發生錯誤 (嘗試 2/2): ValueError: 在結構化數據部分未找到有效的JSON對象。
2025-09-23 00:22:58 - [ERROR] - [512280345618546699] 文本塊 6/7 在所有重試後最終失敗。
2025-09-23 00:22:58 - [INFO] - [512280345618546699] 正在處理文本塊 7/7...
2025-09-23 00:22:58 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #4) 遭遇內容審查或解析錯誤: BlockedPromptException。
2025-09-23 00:22:58 - [WARNING] - [512280345618546699] 處理文本塊 7/7 時發生錯誤 (嘗試 1/2): BlockedPromptException: Prompt blocked due to PROHIBITED_CONTENT
2025-09-23 00:23:00 - [WARNING] - [512280345618546699] 文本塊 7 首次嘗試失敗，正在注入【零號指令】進行強化重試...
2025-09-23 00:23:01 - [WARNING] - [512280345618546699] 模型 'gemini-2.5-flash-lite' (Key #5) 遭遇內容審查或解析錯誤: BlockedPromptException。
2025-09-23 00:23:01 - [WARNING] - [512280345618546699] 處理文本塊 7/7 時發生錯誤 (嘗試 2/2): BlockedPromptException: Prompt blocked due to PROHIBITED_CONTENT
2025-09-23 00:23:01 - [ERROR] - [512280345618546699] 文本塊 7/7 在所有重試後最終失敗。
2025-09-23 00:23:01 - [INFO] - [512280345618546699] 世界聖經智能解析與 LORE 創建完成。總共 7 個文本塊，成功處理 3 個。
